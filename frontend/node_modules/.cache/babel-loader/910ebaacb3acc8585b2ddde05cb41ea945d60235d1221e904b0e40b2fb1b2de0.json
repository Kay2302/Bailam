{"ast":null,"code":"// src/services/api.js\nimport axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\n\n// Tạo instance axios với cấu hình cơ bản\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Thêm interceptor để đính kèm token xác thực khi có sẵn\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Thêm interceptor để xử lý lỗi 401 (Unauthorized)\napiClient.interceptors.response.use(response => response, error => {\n  if (error.response && error.response.status === 401) {\n    // Xóa thông tin xác thực\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n    localStorage.removeItem('userRole');\n    localStorage.removeItem('isAuthenticated');\n\n    // Chuyển hướng đến trang đăng nhập\n    window.location = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// API Sản phẩm\nexport const productApi = {\n  getAll: async params => {\n    try {\n      return await apiClient.get('/products', {\n        params\n      });\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách sản phẩm:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  getById: async id => {\n    try {\n      return await apiClient.get(`/products/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin sản phẩm ${id}:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  getByCategory: async categoryId => {\n    try {\n      return await apiClient.get(`/products/category/${categoryId}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy sản phẩm theo danh mục ${categoryId}:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  getRelated: async id => {\n    try {\n      return await apiClient.get(`/products/${id}/related`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy sản phẩm liên quan cho ${id}:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  search: async query => {\n    try {\n      return await apiClient.get(`/products/search`, {\n        params: {\n          query\n        }\n      });\n    } catch (error) {\n      console.error(`Lỗi khi tìm kiếm sản phẩm:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  create: async data => {\n    try {\n      return await apiClient.post('/products', data);\n    } catch (error) {\n      console.error('Lỗi khi tạo sản phẩm mới:', error);\n      throw error;\n    }\n  },\n  update: async (id, data) => {\n    try {\n      return await apiClient.put(`/products/${id}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật sản phẩm ${id}:`, error);\n      throw error;\n    }\n  },\n  delete: async id => {\n    try {\n      return await apiClient.delete(`/products/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi xóa sản phẩm ${id}:`, error);\n      throw error;\n    }\n  }\n};\n\n// API Đánh giá\nexport const reviewApi = {\n  getByProductId: async productId => {\n    try {\n      return await apiClient.get(`/reviews/${productId}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy đánh giá cho sản phẩm ${productId}:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  add: async (productId, data) => {\n    try {\n      return await apiClient.post(`/reviews/${productId}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi thêm đánh giá cho sản phẩm ${productId}:`, error);\n      throw error;\n    }\n  },\n  delete: async id => {\n    try {\n      return await apiClient.delete(`/reviews/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi xóa đánh giá ${id}:`, error);\n      throw error;\n    }\n  },\n  getAll: async () => {\n    try {\n      return await apiClient.get('/reviews');\n    } catch (error) {\n      console.error('Lỗi khi lấy tất cả đánh giá:', error);\n      return {\n        data: []\n      };\n    }\n  }\n};\n\n// API Danh mục\nexport const categoryApi = {\n  getAll: async () => {\n    try {\n      return await apiClient.get('/categories');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách danh mục:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  getById: async id => {\n    try {\n      return await apiClient.get(`/categories/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin danh mục ${id}:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  create: async data => {\n    try {\n      return await apiClient.post('/categories', data);\n    } catch (error) {\n      console.error('Lỗi khi tạo danh mục mới:', error);\n      throw error;\n    }\n  },\n  update: async (id, data) => {\n    try {\n      return await apiClient.put(`/categories/${id}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật danh mục ${id}:`, error);\n      throw error;\n    }\n  },\n  delete: async id => {\n    try {\n      return await apiClient.delete(`/categories/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi xóa danh mục ${id}:`, error);\n      throw error;\n    }\n  }\n};\n\n// API Đơn hàng\nexport const orderApi = {\n  getAll: async () => {\n    try {\n      return await apiClient.get('/orders');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách đơn hàng:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  getById: async id => {\n    try {\n      return await apiClient.get(`/orders/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin đơn hàng ${id}:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  getUserOrders: async userId => {\n    try {\n      return await apiClient.get(`/orders/user/${userId}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy đơn hàng của người dùng:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  create: async data => {\n    try {\n      return await apiClient.post('/orders', data);\n    } catch (error) {\n      console.error('Lỗi khi tạo đơn hàng mới:', error);\n      throw error;\n    }\n  },\n  updateStatus: async (id, status) => {\n    try {\n      return await apiClient.put(`/orders/${id}/status`, {\n        status\n      });\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật trạng thái đơn hàng ${id}:`, error);\n      throw error;\n    }\n  },\n  getStats: async () => {\n    try {\n      return await apiClient.get('/orders/stats');\n    } catch (error) {\n      console.error('Lỗi khi lấy thống kê đơn hàng:', error);\n      return {\n        data: {}\n      };\n    }\n  },\n  getCustomers: async () => {\n    try {\n      return await apiClient.get('/orders/customers');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách khách hàng:', error);\n      return {\n        data: []\n      };\n    }\n  }\n};\n\n// API Người dùng\nexport const userApi = {\n  register: async userData => {\n    try {\n      return await apiClient.post('/users/register', userData);\n    } catch (error) {\n      console.error('Lỗi khi đăng ký tài khoản:', error);\n      throw error;\n    }\n  },\n  login: async credentials => {\n    console.log('Đang đăng nhập với:', credentials.email);\n    try {\n      // Kiểm tra thông tin đăng nhập\n      if (!credentials.email || !credentials.password) {\n        throw new Error('Vui lòng nhập đầy đủ email và mật khẩu');\n      }\n\n      // Đặt timeout cho request để tránh chờ quá lâu\n      const response = await apiClient.post('/test-login', credentials, {\n        timeout: 10000\n      });\n      console.log('Đăng nhập thành công:', response.data);\n\n      // Lưu thông tin đăng nhập vào localStorage\n      if (response.data.token) {\n        localStorage.setItem('token', response.data.token);\n        if (response.data.user) {\n          localStorage.setItem('userId', response.data.user.id);\n          localStorage.setItem('userRole', response.data.user.role);\n          localStorage.setItem('userName', response.data.user.name);\n          localStorage.setItem('userEmail', response.data.user.email);\n          localStorage.setItem('isAuthenticated', 'true');\n        }\n      }\n      return response;\n    } catch (error) {\n      console.error('Lỗi khi đăng nhập:', error);\n\n      // Xử lý các loại lỗi cụ thể\n      if (error.response) {\n        // Server trả về response (lỗi HTTP)\n        console.error('Mã lỗi:', error.response.status);\n        console.error('Thông báo từ server:', error.response.data);\n\n        // Xử lý các mã lỗi cụ thể\n        switch (error.response.status) {\n          case 401:\n            throw new Error(error.response.data.message || 'Email hoặc mật khẩu không đúng');\n          case 403:\n            throw new Error('Tài khoản của bạn không có quyền truy cập');\n          case 429:\n            throw new Error('Quá nhiều yêu cầu. Vui lòng thử lại sau');\n          case 500:\n            throw new Error('Lỗi máy chủ. Vui lòng thử lại sau');\n          default:\n            throw new Error(error.response.data.message || 'Đăng nhập thất bại');\n        }\n      } else if (error.request) {\n        // Request được gửi nhưng không nhận được response\n        console.error('Không nhận được phản hồi từ server');\n        throw new Error('Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại.');\n      } else if (error.code === 'ECONNABORTED') {\n        // Timeout\n        console.error('Request timeout');\n        throw new Error('Kết nối đến máy chủ quá chậm. Vui lòng thử lại sau.');\n      } else {\n        // Lỗi khác\n        console.error('Lỗi:', error.message);\n        throw error;\n      }\n    }\n  },\n  // Phương thức kiểm tra đăng nhập\n  checkAuth: () => {\n    const token = localStorage.getItem('token');\n    const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';\n    const userRole = localStorage.getItem('userRole');\n    return {\n      isAuthenticated,\n      userRole,\n      token\n    };\n  },\n  // Phương thức đăng xuất\n  logout: () => {\n    // Xóa tất cả thông tin xác thực khỏi localStorage\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n    localStorage.removeItem('userRole');\n    localStorage.removeItem('userName');\n    localStorage.removeItem('userEmail');\n    localStorage.removeItem('isAuthenticated');\n    console.log('Đã đăng xuất thành công');\n    return true;\n  },\n  // Lấy thông tin người dùng hiện tại từ localStorage\n  getCurrentUser: () => {\n    return {\n      id: localStorage.getItem('userId'),\n      name: localStorage.getItem('userName'),\n      email: localStorage.getItem('userEmail'),\n      role: localStorage.getItem('userRole')\n    };\n  },\n  getProfile: async id => {\n    try {\n      return await apiClient.get(`/users/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin người dùng:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  updateProfile: async (id, data) => {\n    try {\n      return await apiClient.put(`/users/${id}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật thông tin người dùng:`, error);\n      throw error;\n    }\n  },\n  changePassword: async (id, data) => {\n    try {\n      return await apiClient.put(`/users/${id}/password`, data);\n    } catch (error) {\n      console.error(`Lỗi khi đổi mật khẩu:`, error);\n      throw error;\n    }\n  },\n  getAllUsers: async () => {\n    try {\n      return await apiClient.get('/users');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách người dùng:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  // Thêm phương thức yêu cầu đặt lại mật khẩu\n  requestPasswordReset: async email => {\n    try {\n      return await apiClient.post('/users/reset-password-request', {\n        email\n      });\n    } catch (error) {\n      console.error('Lỗi khi yêu cầu đặt lại mật khẩu:', error);\n      throw error;\n    }\n  },\n  // Thêm phương thức đặt lại mật khẩu\n  resetPassword: async (token, newPassword) => {\n    try {\n      return await apiClient.post('/users/reset-password', {\n        token,\n        newPassword\n      });\n    } catch (error) {\n      console.error('Lỗi khi đặt lại mật khẩu:', error);\n      throw error;\n    }\n  }\n};\n\n// API Giỏ hàng\nexport const cartApi = {\n  getCart: async () => {\n    try {\n      return await apiClient.get('/cart');\n    } catch (error) {\n      console.error('Lỗi khi lấy giỏ hàng:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  addItem: async data => {\n    try {\n      return await apiClient.post('/cart/items', data);\n    } catch (error) {\n      console.error('Lỗi khi thêm sản phẩm vào giỏ hàng:', error);\n      throw error;\n    }\n  },\n  updateItem: async (productId, quantity) => {\n    try {\n      return await apiClient.put(`/cart/items/${productId}`, {\n        quantity\n      });\n    } catch (error) {\n      console.error('Lỗi khi cập nhật số lượng sản phẩm trong giỏ hàng:', error);\n      throw error;\n    }\n  },\n  removeItem: async productId => {\n    try {\n      return await apiClient.delete(`/cart/items/${productId}`);\n    } catch (error) {\n      console.error('Lỗi khi xóa sản phẩm khỏi giỏ hàng:', error);\n      throw error;\n    }\n  },\n  clearCart: async () => {\n    try {\n      return await apiClient.delete('/cart');\n    } catch (error) {\n      console.error('Lỗi khi xóa toàn bộ giỏ hàng:', error);\n      throw error;\n    }\n  },\n  // Wishlist API\n  getWishlist: async () => {\n    try {\n      return await apiClient.get('/wishlist');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách yêu thích:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  addToWishlist: async productId => {\n    try {\n      return await apiClient.post('/wishlist/items', {\n        productId\n      });\n    } catch (error) {\n      console.error('Lỗi khi thêm sản phẩm vào danh sách yêu thích:', error);\n      throw error;\n    }\n  },\n  removeFromWishlist: async productId => {\n    try {\n      return await apiClient.delete(`/wishlist/items/${productId}`);\n    } catch (error) {\n      console.error('Lỗi khi xóa sản phẩm khỏi danh sách yêu thích:', error);\n      throw error;\n    }\n  }\n};\n\n// Export tất cả các API dưới dạng đối tượng\nexport default {\n  product: productApi,\n  review: reviewApi,\n  category: categoryApi,\n  order: orderApi,\n  user: userApi,\n  cart: cartApi\n};","map":{"version":3,"names":["axios","API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","status","removeItem","window","location","Promise","reject","productApi","getAll","params","get","console","data","getById","id","getByCategory","categoryId","getRelated","search","query","post","update","put","delete","reviewApi","getByProductId","productId","add","categoryApi","orderApi","getUserOrders","userId","updateStatus","getStats","getCustomers","userApi","register","userData","login","credentials","log","email","password","Error","timeout","setItem","user","role","name","message","code","checkAuth","isAuthenticated","userRole","logout","getCurrentUser","getProfile","updateProfile","changePassword","getAllUsers","requestPasswordReset","resetPassword","newPassword","cartApi","getCart","addItem","updateItem","quantity","clearCart","getWishlist","addToWishlist","removeFromWishlist","product","review","category","order","cart"],"sources":["D:/UDW/BaiLam/frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Tạo instance axios với cấu hình cơ bản\r\nconst apiClient = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Thêm interceptor để đính kèm token xác thực khi có sẵn\r\napiClient.interceptors.request.use(config => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Thêm interceptor để xử lý lỗi 401 (Unauthorized)\r\napiClient.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    if (error.response && error.response.status === 401) {\r\n      // Xóa thông tin xác thực\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('userId');\r\n      localStorage.removeItem('userRole');\r\n      localStorage.removeItem('isAuthenticated');\r\n      \r\n      // Chuyển hướng đến trang đăng nhập\r\n      window.location = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// API Sản phẩm\r\nexport const productApi = {\r\n  getAll: async (params) => {\r\n    try {\r\n      return await apiClient.get('/products', { params });\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách sản phẩm:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  getById: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/products/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin sản phẩm ${id}:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  getByCategory: async (categoryId) => {\r\n    try {\r\n      return await apiClient.get(`/products/category/${categoryId}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy sản phẩm theo danh mục ${categoryId}:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  getRelated: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/products/${id}/related`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy sản phẩm liên quan cho ${id}:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  search: async (query) => {\r\n    try {\r\n      return await apiClient.get(`/products/search`, { params: { query } });\r\n    } catch (error) {\r\n      console.error(`Lỗi khi tìm kiếm sản phẩm:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  create: async (data) => {\r\n    try {\r\n      return await apiClient.post('/products', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi tạo sản phẩm mới:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  update: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/products/${id}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật sản phẩm ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (id) => {\r\n    try {\r\n      return await apiClient.delete(`/products/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi xóa sản phẩm ${id}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// API Đánh giá\r\nexport const reviewApi = {\r\n  getByProductId: async (productId) => {\r\n    try {\r\n      return await apiClient.get(`/reviews/${productId}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy đánh giá cho sản phẩm ${productId}:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  add: async (productId, data) => {\r\n    try {\r\n      return await apiClient.post(`/reviews/${productId}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi thêm đánh giá cho sản phẩm ${productId}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (id) => {\r\n    try {\r\n      return await apiClient.delete(`/reviews/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi xóa đánh giá ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getAll: async () => {\r\n    try {\r\n      return await apiClient.get('/reviews');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy tất cả đánh giá:', error);\r\n      return { data: [] };\r\n    }\r\n  }\r\n};\r\n\r\n// API Danh mục\r\nexport const categoryApi = {\r\n  getAll: async () => {\r\n    try {\r\n      return await apiClient.get('/categories');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách danh mục:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  getById: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/categories/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin danh mục ${id}:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  create: async (data) => {\r\n    try {\r\n      return await apiClient.post('/categories', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi tạo danh mục mới:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  update: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/categories/${id}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật danh mục ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (id) => {\r\n    try {\r\n      return await apiClient.delete(`/categories/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi xóa danh mục ${id}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// API Đơn hàng\r\nexport const orderApi = {\r\n  getAll: async () => {\r\n    try {\r\n      return await apiClient.get('/orders');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách đơn hàng:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n\r\n  \r\n  getById: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/orders/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin đơn hàng ${id}:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  getUserOrders: async (userId) => {\r\n    try {\r\n      return await apiClient.get(`/orders/user/${userId}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy đơn hàng của người dùng:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  create: async (data) => {\r\n    try {\r\n      return await apiClient.post('/orders', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi tạo đơn hàng mới:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  updateStatus: async (id, status) => {\r\n    try {\r\n      return await apiClient.put(`/orders/${id}/status`, { status });\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật trạng thái đơn hàng ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getStats: async () => {\r\n    try {\r\n      return await apiClient.get('/orders/stats');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy thống kê đơn hàng:', error);\r\n      return { data: {} };\r\n    }\r\n  },\r\n  \r\n  getCustomers: async () => {\r\n    try {\r\n      return await apiClient.get('/orders/customers');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách khách hàng:', error);\r\n      return { data: [] };\r\n    }\r\n  }\r\n  \r\n  \r\n};\r\n\r\n// API Người dùng\r\nexport const userApi = {\r\n  register: async (userData) => {\r\n    try {\r\n      return await apiClient.post('/users/register', userData);\r\n    } catch (error) {\r\n      console.error('Lỗi khi đăng ký tài khoản:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\nlogin: async (credentials) => {\r\n  console.log('Đang đăng nhập với:', credentials.email);\r\n  try {\r\n    // Kiểm tra thông tin đăng nhập\r\n    if (!credentials.email || !credentials.password) {\r\n      throw new Error('Vui lòng nhập đầy đủ email và mật khẩu');\r\n    }\r\n    \r\n    // Đặt timeout cho request để tránh chờ quá lâu\r\n    const response = await apiClient.post('/test-login', credentials, {\r\n      timeout: 10000\r\n    });\r\n    \r\n    console.log('Đăng nhập thành công:', response.data);\r\n    \r\n    // Lưu thông tin đăng nhập vào localStorage\r\n    if (response.data.token) {\r\n      localStorage.setItem('token', response.data.token);\r\n      \r\n      if (response.data.user) {\r\n        localStorage.setItem('userId', response.data.user.id);\r\n        localStorage.setItem('userRole', response.data.user.role);\r\n        localStorage.setItem('userName', response.data.user.name);\r\n        localStorage.setItem('userEmail', response.data.user.email);\r\n        localStorage.setItem('isAuthenticated', 'true');\r\n      }\r\n    }\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('Lỗi khi đăng nhập:', error);\r\n    \r\n    // Xử lý các loại lỗi cụ thể\r\n    if (error.response) {\r\n      // Server trả về response (lỗi HTTP)\r\n      console.error('Mã lỗi:', error.response.status);\r\n      console.error('Thông báo từ server:', error.response.data);\r\n      \r\n      // Xử lý các mã lỗi cụ thể\r\n      switch (error.response.status) {\r\n        case 401:\r\n          throw new Error(error.response.data.message || 'Email hoặc mật khẩu không đúng');\r\n        case 403:\r\n          throw new Error('Tài khoản của bạn không có quyền truy cập');\r\n        case 429:\r\n          throw new Error('Quá nhiều yêu cầu. Vui lòng thử lại sau');\r\n        case 500:\r\n          throw new Error('Lỗi máy chủ. Vui lòng thử lại sau');\r\n        default:\r\n          throw new Error(error.response.data.message || 'Đăng nhập thất bại');\r\n      }\r\n    } else if (error.request) {\r\n      // Request được gửi nhưng không nhận được response\r\n      console.error('Không nhận được phản hồi từ server');\r\n      throw new Error('Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại.');\r\n    } else if (error.code === 'ECONNABORTED') {\r\n      // Timeout\r\n      console.error('Request timeout');\r\n      throw new Error('Kết nối đến máy chủ quá chậm. Vui lòng thử lại sau.');\r\n    } else {\r\n      // Lỗi khác\r\n      console.error('Lỗi:', error.message);\r\n      throw error;\r\n    }\r\n  }\r\n},\r\n\r\n// Phương thức kiểm tra đăng nhập\r\ncheckAuth: () => {\r\n  const token = localStorage.getItem('token');\r\n  const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';\r\n  const userRole = localStorage.getItem('userRole');\r\n  \r\n  return {\r\n    isAuthenticated,\r\n    userRole,\r\n    token\r\n  };\r\n},\r\n\r\n// Phương thức đăng xuất\r\nlogout: () => {\r\n  // Xóa tất cả thông tin xác thực khỏi localStorage\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('userId');\r\n  localStorage.removeItem('userRole');\r\n  localStorage.removeItem('userName');\r\n  localStorage.removeItem('userEmail');\r\n  localStorage.removeItem('isAuthenticated');\r\n  \r\n  console.log('Đã đăng xuất thành công');\r\n  return true;\r\n},\r\n\r\n// Lấy thông tin người dùng hiện tại từ localStorage\r\ngetCurrentUser: () => {\r\n  return {\r\n    id: localStorage.getItem('userId'),\r\n    name: localStorage.getItem('userName'),\r\n    email: localStorage.getItem('userEmail'),\r\n    role: localStorage.getItem('userRole')\r\n  };\r\n},\r\n  getProfile: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/users/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin người dùng:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  updateProfile: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/users/${id}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật thông tin người dùng:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  changePassword: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/users/${id}/password`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi đổi mật khẩu:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getAllUsers: async () => {\r\n    try {\r\n      return await apiClient.get('/users');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách người dùng:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  // Thêm phương thức yêu cầu đặt lại mật khẩu\r\n  requestPasswordReset: async (email) => {\r\n    try {\r\n      return await apiClient.post('/users/reset-password-request', { email });\r\n    } catch (error) {\r\n      console.error('Lỗi khi yêu cầu đặt lại mật khẩu:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  // Thêm phương thức đặt lại mật khẩu\r\n  resetPassword: async (token, newPassword) => {\r\n    try {\r\n      return await apiClient.post('/users/reset-password', { token, newPassword });\r\n    } catch (error) {\r\n      console.error('Lỗi khi đặt lại mật khẩu:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// API Giỏ hàng\r\nexport const cartApi = {\r\n  getCart: async () => {\r\n    try {\r\n      return await apiClient.get('/cart');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy giỏ hàng:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  addItem: async (data) => {\r\n    try {\r\n      return await apiClient.post('/cart/items', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi thêm sản phẩm vào giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  updateItem: async (productId, quantity) => {\r\n    try {\r\n      return await apiClient.put(`/cart/items/${productId}`, { quantity });\r\n    } catch (error) {\r\n      console.error('Lỗi khi cập nhật số lượng sản phẩm trong giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  removeItem: async (productId) => {\r\n    try {\r\n      return await apiClient.delete(`/cart/items/${productId}`);\r\n    } catch (error) {\r\n      console.error('Lỗi khi xóa sản phẩm khỏi giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  clearCart: async () => {\r\n    try {\r\n      return await apiClient.delete('/cart');\r\n    } catch (error) {\r\n      console.error('Lỗi khi xóa toàn bộ giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  // Wishlist API\r\n  getWishlist: async () => {\r\n    try {\r\n      return await apiClient.get('/wishlist');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách yêu thích:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  addToWishlist: async (productId) => {\r\n    try {\r\n      return await apiClient.post('/wishlist/items', { productId });\r\n    } catch (error) {\r\n      console.error('Lỗi khi thêm sản phẩm vào danh sách yêu thích:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  removeFromWishlist: async (productId) => {\r\n    try {\r\n      return await apiClient.delete(`/wishlist/items/${productId}`);\r\n    } catch (error) {\r\n      console.error('Lỗi khi xóa sản phẩm khỏi danh sách yêu thích:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// Export tất cả các API dưới dạng đối tượng\r\nexport default {\r\n  product: productApi,\r\n  review: reviewApi,\r\n  category: categoryApi,\r\n  order: orderApi,\r\n  user: userApi,\r\n  cart: cartApi\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}