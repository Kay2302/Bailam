{"ast":null,"code":"var _jsxFileName = \"D:\\\\UDW\\\\BaiLam\\\\frontend\\\\src\\\\contexts\\\\ProductContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/contexts/ProductContext.js\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { cartApi, wishlistApi } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductContext = /*#__PURE__*/createContext();\nexport const useProduct = () => {\n  _s();\n  return useContext(ProductContext);\n};\n_s(useProduct, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ProductProvider = ({\n  children\n}) => {\n  _s2();\n  const {\n    currentUser,\n    isAuthenticated\n  } = useAuth();\n  const [cart, setCart] = useState([]);\n  const [wishlist, setWishlist] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Tải giỏ hàng và wishlist khi component mount hoặc khi trạng thái đăng nhập thay đổi\n  useEffect(() => {\n    const loadCartAndWishlist = async () => {\n      try {\n        if (isAuthenticated && currentUser) {\n          setLoading(true);\n\n          // Lấy giỏ hàng từ localStorage (nếu có) để đồng bộ lên server\n          const localCart = localStorage.getItem('cart');\n          let localCartItems = [];\n          if (localCart) {\n            localCartItems = JSON.parse(localCart);\n            // Đồng bộ giỏ hàng local lên server\n            if (localCartItems.length > 0) {\n              try {\n                await cartApi.syncLocalCart(currentUser.id, localCartItems);\n                // Xóa giỏ hàng local sau khi đồng bộ\n                localStorage.removeItem('cart');\n              } catch (syncError) {\n                console.error('Error syncing local cart:', syncError);\n              }\n            }\n          }\n\n          // Lấy giỏ hàng từ server\n          const cartResponse = await cartApi.getCart(currentUser.id);\n          setCart(cartResponse.data);\n\n          // Xử lý tương tự cho wishlist\n          const localWishlist = localStorage.getItem('wishlist');\n          if (localWishlist) {\n            // Xử lý đồng bộ wishlist nếu cần\n            localStorage.removeItem('wishlist');\n          }\n\n          // Lấy wishlist từ server\n          const wishlistResponse = await wishlistApi.getWishlist(currentUser.id);\n          setWishlist(wishlistResponse.data);\n        } else {\n          // Nếu chưa đăng nhập, lấy từ localStorage\n          const storedCart = localStorage.getItem('cart');\n          const storedWishlist = localStorage.getItem('wishlist');\n          if (storedCart) {\n            setCart(JSON.parse(storedCart));\n          }\n          if (storedWishlist) {\n            setWishlist(JSON.parse(storedWishlist));\n          }\n        }\n      } catch (err) {\n        console.error('Error loading cart and wishlist:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadCartAndWishlist();\n  }, [isAuthenticated, currentUser]);\n\n  // Lưu giỏ hàng vào localStorage (chỉ khi chưa đăng nhập)\n  useEffect(() => {\n    if (!isAuthenticated && cart.length > 0) {\n      localStorage.setItem('cart', JSON.stringify(cart));\n    }\n  }, [cart, isAuthenticated]);\n\n  // Lưu wishlist vào localStorage (chỉ khi chưa đăng nhập)\n  useEffect(() => {\n    if (!isAuthenticated && wishlist.length > 0) {\n      localStorage.setItem('wishlist', JSON.stringify(wishlist));\n    }\n  }, [wishlist, isAuthenticated]);\n\n  // Thêm sản phẩm vào giỏ hàng\n  const addToCart = async (product, quantity = 1) => {\n    try {\n      if (isAuthenticated && currentUser) {\n        // Đã đăng nhập - lưu vào database qua API\n        setLoading(true);\n        const response = await cartApi.addToCart(currentUser.id, product.id, quantity);\n        setCart(response.data);\n        setLoading(false);\n      } else {\n        // Chưa đăng nhập - lưu vào localStorage\n        setCart(prevCart => {\n          const existingItemIndex = prevCart.findIndex(item => item.id === product.id);\n          if (existingItemIndex >= 0) {\n            // Sản phẩm đã tồn tại, cập nhật số lượng\n            const updatedCart = [...prevCart];\n            updatedCart[existingItemIndex] = {\n              ...updatedCart[existingItemIndex],\n              quantity: updatedCart[existingItemIndex].quantity + quantity\n            };\n            return updatedCart;\n          } else {\n            // Thêm sản phẩm mới\n            return [...prevCart, {\n              ...product,\n              quantity\n            }];\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      setLoading(false);\n    }\n  };\n\n  // Cập nhật số lượng sản phẩm trong giỏ hàng\n  const updateCartItem = async (id, quantity) => {\n    try {\n      if (isAuthenticated && currentUser) {\n        // Đã đăng nhập - cập nhật qua API\n        setLoading(true);\n        await cartApi.updateCartItem(currentUser.id, id, quantity);\n\n        // Cập nhật state\n        setCart(prevCart => prevCart.map(item => item.id === id || item.product_id === id ? {\n          ...item,\n          quantity\n        } : item));\n        setLoading(false);\n      } else {\n        // Chưa đăng nhập - cập nhật localStorage\n        setCart(prevCart => prevCart.map(item => item.id === id ? {\n          ...item,\n          quantity\n        } : item));\n      }\n    } catch (error) {\n      console.error('Error updating cart item:', error);\n      setLoading(false);\n    }\n  };\n\n  // Xóa sản phẩm khỏi giỏ hàng\n  const removeFromCart = async id => {\n    try {\n      if (isAuthenticated && currentUser) {\n        // Đã đăng nhập - xóa qua API\n        setLoading(true);\n        await cartApi.removeFromCart(currentUser.id, id);\n\n        // Cập nhật state\n        setCart(prevCart => prevCart.filter(item => item.id !== id && item.product_id !== id));\n        setLoading(false);\n      } else {\n        // Chưa đăng nhập - xóa từ localStorage\n        setCart(prevCart => prevCart.filter(item => item.id !== id));\n      }\n    } catch (error) {\n      console.error('Error removing from cart:', error);\n      setLoading(false);\n    }\n  };\n\n  // Xóa toàn bộ giỏ hàng\n  const clearCart = async () => {\n    try {\n      if (isAuthenticated && currentUser) {\n        // Đã đăng nhập - xóa qua API\n        setLoading(true);\n        await cartApi.clearCart(currentUser.id);\n        setLoading(false);\n      }\n\n      // Luôn cập nhật state\n      setCart([]);\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      setLoading(false);\n    }\n  };\n\n  // Tính tổng giá trị giỏ hàng\n  const getCartTotal = () => {\n    return cart.reduce((total, item) => {\n      const price = item.discount_price || item.discountPrice || item.price;\n      return total + price * (item.quantity || 1);\n    }, 0);\n  };\n\n  // Thêm vào wishlist\n  const addToWishlist = async product => {\n    try {\n      if (isAuthenticated && currentUser) {\n        // Đã đăng nhập - lưu vào database\n        setLoading(true);\n        await wishlistApi.addToWishlist(currentUser.id, product.id);\n\n        // Lấy wishlist mới nhất\n        const response = await wishlistApi.getWishlist(currentUser.id);\n        setWishlist(response.data);\n        setLoading(false);\n      } else {\n        // Chưa đăng nhập - lưu vào localStorage\n        setWishlist(prevWishlist => {\n          const exists = prevWishlist.some(item => item.id === product.id);\n          if (exists) {\n            return prevWishlist;\n          } else {\n            return [...prevWishlist, product];\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error adding to wishlist:', error);\n      setLoading(false);\n    }\n  };\n\n  // Xóa khỏi wishlist\n  const removeFromWishlist = async id => {\n    try {\n      if (isAuthenticated && currentUser) {\n        // Đã đăng nhập - xóa qua API\n        setLoading(true);\n        await wishlistApi.removeFromWishlist(currentUser.id, id);\n\n        // Cập nhật state\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id && item.product_id !== id));\n        setLoading(false);\n      } else {\n        // Chưa đăng nhập - xóa từ localStorage\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\n      }\n    } catch (error) {\n      console.error('Error removing from wishlist:', error);\n      setLoading(false);\n    }\n  };\n  const value = {\n    cart,\n    wishlist,\n    loading,\n    addToCart,\n    updateCartItem,\n    removeFromCart,\n    clearCart,\n    getCartTotal,\n    addToWishlist,\n    removeFromWishlist\n  };\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 271,\n    columnNumber: 10\n  }, this);\n};\n_s2(ProductProvider, \"JU465xL3DIlWUYvjaf+2aMN0zMI=\", false, function () {\n  return [useAuth];\n});\n_c = ProductProvider;\nvar _c;\n$RefreshReg$(_c, \"ProductProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useAuth","cartApi","wishlistApi","jsxDEV","_jsxDEV","ProductContext","useProduct","_s","ProductProvider","children","_s2","currentUser","isAuthenticated","cart","setCart","wishlist","setWishlist","loading","setLoading","loadCartAndWishlist","localCart","localStorage","getItem","localCartItems","JSON","parse","length","syncLocalCart","id","removeItem","syncError","console","error","cartResponse","getCart","data","localWishlist","wishlistResponse","getWishlist","storedCart","storedWishlist","err","setItem","stringify","addToCart","product","quantity","response","prevCart","existingItemIndex","findIndex","item","updatedCart","updateCartItem","map","product_id","removeFromCart","filter","clearCart","getCartTotal","reduce","total","price","discount_price","discountPrice","addToWishlist","prevWishlist","exists","some","removeFromWishlist","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/UDW/BaiLam/frontend/src/contexts/ProductContext.js"],"sourcesContent":["// src/contexts/ProductContext.js\r\nimport React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport { cartApi, wishlistApi } from '../services/api';\r\n\r\nconst ProductContext = createContext();\r\n\r\nexport const useProduct = () => useContext(ProductContext);\r\n\r\nexport const ProductProvider = ({ children }) => {\r\n  const { currentUser, isAuthenticated } = useAuth();\r\n  const [cart, setCart] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Tải giỏ hàng và wishlist khi component mount hoặc khi trạng thái đăng nhập thay đổi\r\n  useEffect(() => {\r\n    const loadCartAndWishlist = async () => {\r\n      try {\r\n        if (isAuthenticated && currentUser) {\r\n          setLoading(true);\r\n          \r\n          // Lấy giỏ hàng từ localStorage (nếu có) để đồng bộ lên server\r\n          const localCart = localStorage.getItem('cart');\r\n          let localCartItems = [];\r\n          if (localCart) {\r\n            localCartItems = JSON.parse(localCart);\r\n            // Đồng bộ giỏ hàng local lên server\r\n            if (localCartItems.length > 0) {\r\n              try {\r\n                await cartApi.syncLocalCart(currentUser.id, localCartItems);\r\n                // Xóa giỏ hàng local sau khi đồng bộ\r\n                localStorage.removeItem('cart');\r\n              } catch (syncError) {\r\n                console.error('Error syncing local cart:', syncError);\r\n              }\r\n            }\r\n          }\r\n          \r\n          // Lấy giỏ hàng từ server\r\n          const cartResponse = await cartApi.getCart(currentUser.id);\r\n          setCart(cartResponse.data);\r\n          \r\n          // Xử lý tương tự cho wishlist\r\n          const localWishlist = localStorage.getItem('wishlist');\r\n          if (localWishlist) {\r\n            // Xử lý đồng bộ wishlist nếu cần\r\n            localStorage.removeItem('wishlist');\r\n          }\r\n          \r\n          // Lấy wishlist từ server\r\n          const wishlistResponse = await wishlistApi.getWishlist(currentUser.id);\r\n          setWishlist(wishlistResponse.data);\r\n        } else {\r\n          // Nếu chưa đăng nhập, lấy từ localStorage\r\n          const storedCart = localStorage.getItem('cart');\r\n          const storedWishlist = localStorage.getItem('wishlist');\r\n\r\n          if (storedCart) {\r\n            setCart(JSON.parse(storedCart));\r\n          }\r\n\r\n          if (storedWishlist) {\r\n            setWishlist(JSON.parse(storedWishlist));\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Error loading cart and wishlist:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadCartAndWishlist();\r\n  }, [isAuthenticated, currentUser]);\r\n\r\n  // Lưu giỏ hàng vào localStorage (chỉ khi chưa đăng nhập)\r\n  useEffect(() => {\r\n    if (!isAuthenticated && cart.length > 0) {\r\n      localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n  }, [cart, isAuthenticated]);\r\n\r\n  // Lưu wishlist vào localStorage (chỉ khi chưa đăng nhập)\r\n  useEffect(() => {\r\n    if (!isAuthenticated && wishlist.length > 0) {\r\n      localStorage.setItem('wishlist', JSON.stringify(wishlist));\r\n    }\r\n  }, [wishlist, isAuthenticated]);\r\n\r\n  // Thêm sản phẩm vào giỏ hàng\r\n  const addToCart = async (product, quantity = 1) => {\r\n    try {\r\n      if (isAuthenticated && currentUser) {\r\n        // Đã đăng nhập - lưu vào database qua API\r\n        setLoading(true);\r\n        const response = await cartApi.addToCart(currentUser.id, product.id, quantity);\r\n        setCart(response.data);\r\n        setLoading(false);\r\n      } else {\r\n        // Chưa đăng nhập - lưu vào localStorage\r\n        setCart(prevCart => {\r\n          const existingItemIndex = prevCart.findIndex(item => item.id === product.id);\r\n          \r\n          if (existingItemIndex >= 0) {\r\n            // Sản phẩm đã tồn tại, cập nhật số lượng\r\n            const updatedCart = [...prevCart];\r\n            updatedCart[existingItemIndex] = {\r\n              ...updatedCart[existingItemIndex],\r\n              quantity: updatedCart[existingItemIndex].quantity + quantity\r\n            };\r\n            return updatedCart;\r\n          } else {\r\n            // Thêm sản phẩm mới\r\n            return [...prevCart, { ...product, quantity }];\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Cập nhật số lượng sản phẩm trong giỏ hàng\r\n  const updateCartItem = async (id, quantity) => {\r\n    try {\r\n      if (isAuthenticated && currentUser) {\r\n        // Đã đăng nhập - cập nhật qua API\r\n        setLoading(true);\r\n        await cartApi.updateCartItem(currentUser.id, id, quantity);\r\n        \r\n        // Cập nhật state\r\n        setCart(prevCart => \r\n          prevCart.map(item => \r\n            item.id === id || item.product_id === id \r\n              ? { ...item, quantity } \r\n              : item\r\n          )\r\n        );\r\n        setLoading(false);\r\n      } else {\r\n        // Chưa đăng nhập - cập nhật localStorage\r\n        setCart(prevCart => \r\n          prevCart.map(item => \r\n            item.id === id ? { ...item, quantity } : item\r\n          )\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating cart item:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Xóa sản phẩm khỏi giỏ hàng\r\n  const removeFromCart = async (id) => {\r\n    try {\r\n      if (isAuthenticated && currentUser) {\r\n        // Đã đăng nhập - xóa qua API\r\n        setLoading(true);\r\n        await cartApi.removeFromCart(currentUser.id, id);\r\n        \r\n        // Cập nhật state\r\n        setCart(prevCart => \r\n          prevCart.filter(item => item.id !== id && item.product_id !== id)\r\n        );\r\n        setLoading(false);\r\n      } else {\r\n        // Chưa đăng nhập - xóa từ localStorage\r\n        setCart(prevCart => prevCart.filter(item => item.id !== id));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing from cart:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Xóa toàn bộ giỏ hàng\r\n  const clearCart = async () => {\r\n    try {\r\n      if (isAuthenticated && currentUser) {\r\n        // Đã đăng nhập - xóa qua API\r\n        setLoading(true);\r\n        await cartApi.clearCart(currentUser.id);\r\n        setLoading(false);\r\n      }\r\n      \r\n      // Luôn cập nhật state\r\n      setCart([]);\r\n    } catch (error) {\r\n      console.error('Error clearing cart:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Tính tổng giá trị giỏ hàng\r\n  const getCartTotal = () => {\r\n    return cart.reduce((total, item) => {\r\n      const price = item.discount_price || item.discountPrice || item.price;\r\n      return total + (price * (item.quantity || 1));\r\n    }, 0);\r\n  };\r\n\r\n  // Thêm vào wishlist\r\n  const addToWishlist = async (product) => {\r\n    try {\r\n      if (isAuthenticated && currentUser) {\r\n        // Đã đăng nhập - lưu vào database\r\n        setLoading(true);\r\n        await wishlistApi.addToWishlist(currentUser.id, product.id);\r\n        \r\n        // Lấy wishlist mới nhất\r\n        const response = await wishlistApi.getWishlist(currentUser.id);\r\n        setWishlist(response.data);\r\n        setLoading(false);\r\n      } else {\r\n        // Chưa đăng nhập - lưu vào localStorage\r\n        setWishlist(prevWishlist => {\r\n          const exists = prevWishlist.some(item => item.id === product.id);\r\n          \r\n          if (exists) {\r\n            return prevWishlist;\r\n          } else {\r\n            return [...prevWishlist, product];\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding to wishlist:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Xóa khỏi wishlist\r\n  const removeFromWishlist = async (id) => {\r\n    try {\r\n      if (isAuthenticated && currentUser) {\r\n        // Đã đăng nhập - xóa qua API\r\n        setLoading(true);\r\n        await wishlistApi.removeFromWishlist(currentUser.id, id);\r\n        \r\n        // Cập nhật state\r\n        setWishlist(prevWishlist => \r\n          prevWishlist.filter(item => item.id !== id && item.product_id !== id)\r\n        );\r\n        setLoading(false);\r\n      } else {\r\n        // Chưa đăng nhập - xóa từ localStorage\r\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing from wishlist:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    cart,\r\n    wishlist,\r\n    loading,\r\n    addToCart,\r\n    updateCartItem,\r\n    removeFromCart,\r\n    clearCart,\r\n    getCartTotal,\r\n    addToWishlist,\r\n    removeFromWishlist\r\n  };\r\n\r\n  return <ProductContext.Provider value={value}>{children}</ProductContext.Provider>;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}