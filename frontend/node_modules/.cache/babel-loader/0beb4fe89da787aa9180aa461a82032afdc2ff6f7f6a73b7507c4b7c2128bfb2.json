{"ast":null,"code":"// src/services/api.js\nimport axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\n\n// Tạo instance axios với cấu hình cơ bản\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Thêm interceptor để đính kèm token xác thực khi có sẵn\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Thêm interceptor để xử lý lỗi 401 (Unauthorized)\napiClient.interceptors.response.use(response => response, error => {\n  if (error.response && error.response.status === 401) {\n    // Xóa thông tin xác thực\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n    localStorage.removeItem('userRole');\n    localStorage.removeItem('isAuthenticated');\n\n    // Chuyển hướng đến trang đăng nhập\n    window.location = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// API Sản phẩm\nexport const productApi = {\n  getAll: async params => {\n    try {\n      return await apiClient.get('/products', {\n        params\n      });\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách sản phẩm:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  getById: async id => {\n    try {\n      return await apiClient.get(`/products/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin sản phẩm ${id}:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  getByCategory: async categoryId => {\n    try {\n      return await apiClient.get(`/products/category/${categoryId}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy sản phẩm theo danh mục ${categoryId}:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  getRelated: async id => {\n    try {\n      return await apiClient.get(`/products/${id}/related`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy sản phẩm liên quan cho ${id}:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  search: async query => {\n    try {\n      return await apiClient.get(`/products/search`, {\n        params: {\n          query\n        }\n      });\n    } catch (error) {\n      console.error(`Lỗi khi tìm kiếm sản phẩm:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  create: async data => {\n    try {\n      return await apiClient.post('/products', data);\n    } catch (error) {\n      console.error('Lỗi khi tạo sản phẩm mới:', error);\n      throw error;\n    }\n  },\n  update: async (id, data) => {\n    try {\n      return await apiClient.put(`/products/${id}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật sản phẩm ${id}:`, error);\n      throw error;\n    }\n  },\n  delete: async id => {\n    try {\n      return await apiClient.delete(`/products/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi xóa sản phẩm ${id}:`, error);\n      throw error;\n    }\n  }\n};\n\n// API Đánh giá\nexport const reviewApi = {\n  getByProductId: async productId => {\n    try {\n      return await apiClient.get(`/reviews/${productId}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy đánh giá cho sản phẩm ${productId}:`, error);\n      return {\n        data: []\n      };\n    }\n  },\n  add: async (productId, data) => {\n    try {\n      return await apiClient.post(`/reviews/${productId}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi thêm đánh giá cho sản phẩm ${productId}:`, error);\n      throw error;\n    }\n  },\n  delete: async id => {\n    try {\n      return await apiClient.delete(`/reviews/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi xóa đánh giá ${id}:`, error);\n      throw error;\n    }\n  },\n  getAll: async () => {\n    try {\n      return await apiClient.get('/reviews');\n    } catch (error) {\n      console.error('Lỗi khi lấy tất cả đánh giá:', error);\n      return {\n        data: []\n      };\n    }\n  }\n};\n\n// API Danh mục\nexport const categoryApi = {\n  getAll: async () => {\n    try {\n      return await apiClient.get('/categories');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách danh mục:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  getById: async id => {\n    try {\n      return await apiClient.get(`/categories/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin danh mục ${id}:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  create: async data => {\n    try {\n      return await apiClient.post('/categories', data);\n    } catch (error) {\n      console.error('Lỗi khi tạo danh mục mới:', error);\n      throw error;\n    }\n  },\n  update: async (id, data) => {\n    try {\n      return await apiClient.put(`/categories/${id}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật danh mục ${id}:`, error);\n      throw error;\n    }\n  },\n  delete: async id => {\n    try {\n      return await apiClient.delete(`/categories/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi xóa danh mục ${id}:`, error);\n      throw error;\n    }\n  }\n};\n\n// API Đơn hàng\n// API Đơn hàng\nexport const orderApi = {\n  getAll: async () => {\n    try {\n      const response = await apiClient.get('/orders');\n      console.log('API getAll orders response:', response);\n      return response;\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách đơn hàng, sử dụng dữ liệu mẫu:', error);\n\n      // Lấy đơn hàng từ localStorage\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n      console.log('Loaded mock orders from localStorage:', mockOrders);\n      return {\n        data: mockOrders\n      };\n    }\n  },\n  getById: async id => {\n    try {\n      const response = await apiClient.get(`/orders/${id}`);\n      return response;\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin đơn hàng ${id}:`, error);\n\n      // Lấy đơn hàng từ localStorage\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n      const order = mockOrders.find(o => o.id === parseInt(id));\n      if (order) {\n        return {\n          data: order\n        };\n      }\n      return {\n        data: null\n      };\n    }\n  },\n  getUserOrders: async userId => {\n    try {\n      const response = await apiClient.get(`/orders/user/${userId}`);\n      return response;\n    } catch (error) {\n      console.error(`Lỗi khi lấy đơn hàng của người dùng:`, error);\n\n      // Lấy đơn hàng từ localStorage\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n      const userOrders = mockOrders.filter(o => o.user_id === parseInt(userId));\n      return {\n        data: userOrders\n      };\n    }\n  },\n  create: async data => {\n    try {\n      console.log('Sending order data to API:', data);\n      const response = await apiClient.post('/orders', data);\n      console.log('API response:', response);\n\n      // Lưu đơn hàng vào localStorage\n      saveOrderToLocalStorage(response.data);\n      return response;\n    } catch (error) {\n      console.error('Error creating order:', error);\n\n      // Tạo đơn hàng giả lập\n      const mockOrder = {\n        id: Math.floor(100000 + Math.random() * 900000),\n        status: 'pending',\n        created_at: new Date().toISOString(),\n        ...data\n      };\n\n      // Lưu đơn hàng vào localStorage\n      saveOrderToLocalStorage(mockOrder);\n      return {\n        data: mockOrder\n      };\n    }\n  },\n  updateStatus: async (id, status) => {\n    try {\n      const response = await apiClient.put(`/orders/${id}/status`, {\n        status\n      });\n\n      // Cập nhật trạng thái đơn hàng trong localStorage\n      updateOrderStatusInLocalStorage(id, status);\n      return response;\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật trạng thái đơn hàng ${id}:`, error);\n\n      // Cập nhật trạng thái đơn hàng trong localStorage\n      updateOrderStatusInLocalStorage(id, status);\n\n      // Trả về response giả lập\n      return {\n        data: {\n          id,\n          status\n        }\n      };\n    }\n  },\n  getStats: async () => {\n    try {\n      return await apiClient.get('/orders/stats');\n    } catch (error) {\n      console.error('Lỗi khi lấy thống kê đơn hàng:', error);\n\n      // Tạo thống kê giả lập từ localStorage\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n      const totalSales = mockOrders.reduce((sum, order) => sum + (order.total_amount || 0), 0);\n      const totalOrders = mockOrders.length;\n      return {\n        data: {\n          totalSales,\n          totalOrders,\n          pendingOrders: mockOrders.filter(o => o.status === 'pending').length,\n          processingOrders: mockOrders.filter(o => o.status === 'processing').length,\n          shippedOrders: mockOrders.filter(o => o.status === 'shipped').length,\n          deliveredOrders: mockOrders.filter(o => o.status === 'delivered').length,\n          cancelledOrders: mockOrders.filter(o => o.status === 'cancelled').length\n        }\n      };\n    }\n  },\n  getCustomers: async () => {\n    try {\n      return await apiClient.get('/orders/customers');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách khách hàng:', error);\n\n      // Tạo danh sách khách hàng giả lập từ localStorage\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n      const customersMap = {};\n      mockOrders.forEach(order => {\n        if (order.customer_email) {\n          if (!customersMap[order.customer_email]) {\n            customersMap[order.customer_email] = {\n              id: Math.floor(1000 + Math.random() * 9000),\n              name: order.customer_name,\n              email: order.customer_email,\n              phone: order.customer_phone,\n              created_at: order.created_at,\n              order_count: 1,\n              total_spent: order.total_amount || 0\n            };\n          } else {\n            customersMap[order.customer_email].order_count += 1;\n            customersMap[order.customer_email].total_spent += order.total_amount || 0;\n          }\n        }\n      });\n      return {\n        data: Object.values(customersMap)\n      };\n    }\n  }\n};\n\n// Hàm trợ giúp để lưu đơn hàng vào localStorage\nconst saveOrderToLocalStorage = order => {\n  // Lấy danh sách đơn hàng hiện tại\n  const savedOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n\n  // Thêm đơn hàng mới vào đầu danh sách\n  savedOrders.unshift({\n    ...order,\n    id: order.id || Math.floor(100000 + Math.random() * 900000),\n    status: order.status || 'pending',\n    created_at: order.created_at || new Date().toISOString()\n  });\n\n  // Lưu lại vào localStorage\n  localStorage.setItem('mockOrders', JSON.stringify(savedOrders));\n  console.log('Saved order to localStorage:', order);\n};\n\n// Hàm trợ giúp để cập nhật trạng thái đơn hàng trong localStorage\nconst updateOrderStatusInLocalStorage = (orderId, status) => {\n  // Lấy danh sách đơn hàng hiện tại\n  const savedOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\n\n  // Cập nhật trạng thái của đơn hàng\n  const updatedOrders = savedOrders.map(order => {\n    if (order.id === parseInt(orderId)) {\n      return {\n        ...order,\n        status\n      };\n    }\n    return order;\n  });\n\n  // Lưu lại vào localStorage\n  localStorage.setItem('mockOrders', JSON.stringify(updatedOrders));\n  console.log(`Updated order ${orderId} status to ${status} in localStorage`);\n};\n\n// API Người dùng\nexport const userApi = {\n  register: async userData => {\n    try {\n      return await apiClient.post('/users/register', userData);\n    } catch (error) {\n      console.error('Lỗi khi đăng ký tài khoản:', error);\n      throw error;\n    }\n  },\n  login: async credentials => {\n    console.log('Đang đăng nhập với:', credentials.email);\n    try {\n      // Kiểm tra thông tin đăng nhập\n      if (!credentials.email || !credentials.password) {\n        throw new Error('Vui lòng nhập đầy đủ email và mật khẩu');\n      }\n\n      // Đặt timeout cho request để tránh chờ quá lâu\n      const response = await apiClient.post('/test-login', credentials, {\n        timeout: 10000\n      });\n      console.log('Đăng nhập thành công:', response.data);\n\n      // Lưu thông tin đăng nhập vào localStorage\n      if (response.data.token) {\n        localStorage.setItem('token', response.data.token);\n        if (response.data.user) {\n          localStorage.setItem('userId', response.data.user.id);\n          localStorage.setItem('userRole', response.data.user.role);\n          localStorage.setItem('userName', response.data.user.name);\n          localStorage.setItem('userEmail', response.data.user.email);\n          localStorage.setItem('isAuthenticated', 'true');\n        }\n      }\n      return response;\n    } catch (error) {\n      console.error('Lỗi khi đăng nhập:', error);\n\n      // Xử lý các loại lỗi cụ thể\n      if (error.response) {\n        // Server trả về response (lỗi HTTP)\n        console.error('Mã lỗi:', error.response.status);\n        console.error('Thông báo từ server:', error.response.data);\n\n        // Xử lý các mã lỗi cụ thể\n        switch (error.response.status) {\n          case 401:\n            throw new Error(error.response.data.message || 'Email hoặc mật khẩu không đúng');\n          case 403:\n            throw new Error('Tài khoản của bạn không có quyền truy cập');\n          case 429:\n            throw new Error('Quá nhiều yêu cầu. Vui lòng thử lại sau');\n          case 500:\n            throw new Error('Lỗi máy chủ. Vui lòng thử lại sau');\n          default:\n            throw new Error(error.response.data.message || 'Đăng nhập thất bại');\n        }\n      } else if (error.request) {\n        // Request được gửi nhưng không nhận được response\n        console.error('Không nhận được phản hồi từ server');\n        throw new Error('Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại.');\n      } else if (error.code === 'ECONNABORTED') {\n        // Timeout\n        console.error('Request timeout');\n        throw new Error('Kết nối đến máy chủ quá chậm. Vui lòng thử lại sau.');\n      } else {\n        // Lỗi khác\n        console.error('Lỗi:', error.message);\n        throw error;\n      }\n    }\n  },\n  // Phương thức kiểm tra đăng nhập\n  checkAuth: () => {\n    const token = localStorage.getItem('token');\n    const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';\n    const userRole = localStorage.getItem('userRole');\n    return {\n      isAuthenticated,\n      userRole,\n      token\n    };\n  },\n  // Phương thức đăng xuất\n  logout: () => {\n    // Xóa tất cả thông tin xác thực khỏi localStorage\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n    localStorage.removeItem('userRole');\n    localStorage.removeItem('userName');\n    localStorage.removeItem('userEmail');\n    localStorage.removeItem('isAuthenticated');\n    console.log('Đã đăng xuất thành công');\n    return true;\n  },\n  // Lấy thông tin người dùng hiện tại từ localStorage\n  getCurrentUser: () => {\n    return {\n      id: localStorage.getItem('userId'),\n      name: localStorage.getItem('userName'),\n      email: localStorage.getItem('userEmail'),\n      role: localStorage.getItem('userRole')\n    };\n  },\n  getProfile: async id => {\n    try {\n      return await apiClient.get(`/users/${id}`);\n    } catch (error) {\n      console.error(`Lỗi khi lấy thông tin người dùng:`, error);\n      return {\n        data: null\n      };\n    }\n  },\n  updateProfile: async (id, data) => {\n    try {\n      return await apiClient.put(`/users/${id}`, data);\n    } catch (error) {\n      console.error(`Lỗi khi cập nhật thông tin người dùng:`, error);\n      throw error;\n    }\n  },\n  changePassword: async (id, data) => {\n    try {\n      return await apiClient.put(`/users/${id}/password`, data);\n    } catch (error) {\n      console.error(`Lỗi khi đổi mật khẩu:`, error);\n      throw error;\n    }\n  },\n  getAllUsers: async () => {\n    try {\n      return await apiClient.get('/users');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách người dùng:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  // Thêm phương thức yêu cầu đặt lại mật khẩu\n  requestPasswordReset: async email => {\n    try {\n      return await apiClient.post('/users/reset-password-request', {\n        email\n      });\n    } catch (error) {\n      console.error('Lỗi khi yêu cầu đặt lại mật khẩu:', error);\n      throw error;\n    }\n  },\n  // Thêm phương thức đặt lại mật khẩu\n  resetPassword: async (token, newPassword) => {\n    try {\n      return await apiClient.post('/users/reset-password', {\n        token,\n        newPassword\n      });\n    } catch (error) {\n      console.error('Lỗi khi đặt lại mật khẩu:', error);\n      throw error;\n    }\n  }\n};\n\n// API Giỏ hàng\nexport const cartApi = {\n  getCart: async () => {\n    try {\n      return await apiClient.get('/cart');\n    } catch (error) {\n      console.error('Lỗi khi lấy giỏ hàng:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  addItem: async data => {\n    try {\n      return await apiClient.post('/cart/items', data);\n    } catch (error) {\n      console.error('Lỗi khi thêm sản phẩm vào giỏ hàng:', error);\n      throw error;\n    }\n  },\n  updateItem: async (productId, quantity) => {\n    try {\n      return await apiClient.put(`/cart/items/${productId}`, {\n        quantity\n      });\n    } catch (error) {\n      console.error('Lỗi khi cập nhật số lượng sản phẩm trong giỏ hàng:', error);\n      throw error;\n    }\n  },\n  removeItem: async productId => {\n    try {\n      return await apiClient.delete(`/cart/items/${productId}`);\n    } catch (error) {\n      console.error('Lỗi khi xóa sản phẩm khỏi giỏ hàng:', error);\n      throw error;\n    }\n  },\n  clearCart: async () => {\n    try {\n      return await apiClient.delete('/cart');\n    } catch (error) {\n      console.error('Lỗi khi xóa toàn bộ giỏ hàng:', error);\n      throw error;\n    }\n  },\n  // Wishlist API\n  getWishlist: async () => {\n    try {\n      return await apiClient.get('/wishlist');\n    } catch (error) {\n      console.error('Lỗi khi lấy danh sách yêu thích:', error);\n      return {\n        data: []\n      };\n    }\n  },\n  addToWishlist: async productId => {\n    try {\n      return await apiClient.post('/wishlist/items', {\n        productId\n      });\n    } catch (error) {\n      console.error('Lỗi khi thêm sản phẩm vào danh sách yêu thích:', error);\n      throw error;\n    }\n  },\n  removeFromWishlist: async productId => {\n    try {\n      return await apiClient.delete(`/wishlist/items/${productId}`);\n    } catch (error) {\n      console.error('Lỗi khi xóa sản phẩm khỏi danh sách yêu thích:', error);\n      throw error;\n    }\n  }\n};\n\n// Tạo một object các API riêng biệt nhưng không export default\nconst apiServices = {\n  product: productApi,\n  review: reviewApi,\n  category: categoryApi,\n  order: orderApi,\n  user: userApi,\n  cart: cartApi\n};\n\n// Export apiServices, nhưng khuyến khích sử dụng các API riêng lẻ để tránh circular dependency\nexport { apiServices };","map":{"version":3,"names":["axios","API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","status","removeItem","window","location","Promise","reject","productApi","getAll","params","get","console","data","getById","id","getByCategory","categoryId","getRelated","search","query","post","update","put","delete","reviewApi","getByProductId","productId","add","categoryApi","orderApi","log","mockOrders","JSON","parse","order","find","o","parseInt","getUserOrders","userId","userOrders","filter","user_id","saveOrderToLocalStorage","mockOrder","Math","floor","random","created_at","Date","toISOString","updateStatus","updateOrderStatusInLocalStorage","getStats","totalSales","reduce","sum","total_amount","totalOrders","length","pendingOrders","processingOrders","shippedOrders","deliveredOrders","cancelledOrders","getCustomers","customersMap","forEach","customer_email","name","customer_name","email","phone","customer_phone","order_count","total_spent","Object","values","savedOrders","unshift","setItem","stringify","orderId","updatedOrders","map","userApi","register","userData","login","credentials","password","Error","timeout","user","role","message","code","checkAuth","isAuthenticated","userRole","logout","getCurrentUser","getProfile","updateProfile","changePassword","getAllUsers","requestPasswordReset","resetPassword","newPassword","cartApi","getCart","addItem","updateItem","quantity","clearCart","getWishlist","addToWishlist","removeFromWishlist","apiServices","product","review","category","cart"],"sources":["D:/UDW/BaiLam/frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Tạo instance axios với cấu hình cơ bản\r\nconst apiClient = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Thêm interceptor để đính kèm token xác thực khi có sẵn\r\napiClient.interceptors.request.use(config => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Thêm interceptor để xử lý lỗi 401 (Unauthorized)\r\napiClient.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    if (error.response && error.response.status === 401) {\r\n      // Xóa thông tin xác thực\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('userId');\r\n      localStorage.removeItem('userRole');\r\n      localStorage.removeItem('isAuthenticated');\r\n      \r\n      // Chuyển hướng đến trang đăng nhập\r\n      window.location = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// API Sản phẩm\r\nexport const productApi = {\r\n  getAll: async (params) => {\r\n    try {\r\n      return await apiClient.get('/products', { params });\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách sản phẩm:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  getById: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/products/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin sản phẩm ${id}:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  getByCategory: async (categoryId) => {\r\n    try {\r\n      return await apiClient.get(`/products/category/${categoryId}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy sản phẩm theo danh mục ${categoryId}:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  getRelated: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/products/${id}/related`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy sản phẩm liên quan cho ${id}:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  search: async (query) => {\r\n    try {\r\n      return await apiClient.get(`/products/search`, { params: { query } });\r\n    } catch (error) {\r\n      console.error(`Lỗi khi tìm kiếm sản phẩm:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  create: async (data) => {\r\n    try {\r\n      return await apiClient.post('/products', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi tạo sản phẩm mới:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  update: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/products/${id}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật sản phẩm ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (id) => {\r\n    try {\r\n      return await apiClient.delete(`/products/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi xóa sản phẩm ${id}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// API Đánh giá\r\nexport const reviewApi = {\r\n  getByProductId: async (productId) => {\r\n    try {\r\n      return await apiClient.get(`/reviews/${productId}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy đánh giá cho sản phẩm ${productId}:`, error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  add: async (productId, data) => {\r\n    try {\r\n      return await apiClient.post(`/reviews/${productId}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi thêm đánh giá cho sản phẩm ${productId}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (id) => {\r\n    try {\r\n      return await apiClient.delete(`/reviews/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi xóa đánh giá ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getAll: async () => {\r\n    try {\r\n      return await apiClient.get('/reviews');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy tất cả đánh giá:', error);\r\n      return { data: [] };\r\n    }\r\n  }\r\n};\r\n\r\n// API Danh mục\r\nexport const categoryApi = {\r\n  getAll: async () => {\r\n    try {\r\n      return await apiClient.get('/categories');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách danh mục:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  getById: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/categories/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin danh mục ${id}:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  create: async (data) => {\r\n    try {\r\n      return await apiClient.post('/categories', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi tạo danh mục mới:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  update: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/categories/${id}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật danh mục ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  delete: async (id) => {\r\n    try {\r\n      return await apiClient.delete(`/categories/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi xóa danh mục ${id}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// API Đơn hàng\r\n// API Đơn hàng\r\nexport const orderApi = {\r\n  getAll: async () => {\r\n    try {\r\n      const response = await apiClient.get('/orders');\r\n      console.log('API getAll orders response:', response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách đơn hàng, sử dụng dữ liệu mẫu:', error);\r\n      \r\n      // Lấy đơn hàng từ localStorage\r\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n      console.log('Loaded mock orders from localStorage:', mockOrders);\r\n      \r\n      return { data: mockOrders };\r\n    }\r\n  },\r\n  \r\n  getById: async (id) => {\r\n    try {\r\n      const response = await apiClient.get(`/orders/${id}`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin đơn hàng ${id}:`, error);\r\n      \r\n      // Lấy đơn hàng từ localStorage\r\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n      const order = mockOrders.find(o => o.id === parseInt(id));\r\n      \r\n      if (order) {\r\n        return { data: order };\r\n      }\r\n      \r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  getUserOrders: async (userId) => {\r\n    try {\r\n      const response = await apiClient.get(`/orders/user/${userId}`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy đơn hàng của người dùng:`, error);\r\n      \r\n      // Lấy đơn hàng từ localStorage\r\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n      const userOrders = mockOrders.filter(o => o.user_id === parseInt(userId));\r\n      \r\n      return { data: userOrders };\r\n    }\r\n  },\r\n  \r\n  create: async (data) => {\r\n    try {\r\n      console.log('Sending order data to API:', data);\r\n      const response = await apiClient.post('/orders', data);\r\n      console.log('API response:', response);\r\n      \r\n      // Lưu đơn hàng vào localStorage\r\n      saveOrderToLocalStorage(response.data);\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error creating order:', error);\r\n      \r\n      // Tạo đơn hàng giả lập\r\n      const mockOrder = {\r\n        id: Math.floor(100000 + Math.random() * 900000),\r\n        status: 'pending',\r\n        created_at: new Date().toISOString(),\r\n        ...data\r\n      };\r\n      \r\n      // Lưu đơn hàng vào localStorage\r\n      saveOrderToLocalStorage(mockOrder);\r\n      \r\n      return {\r\n        data: mockOrder\r\n      };\r\n    }\r\n  },\r\n  \r\n  updateStatus: async (id, status) => {\r\n    try {\r\n      const response = await apiClient.put(`/orders/${id}/status`, { status });\r\n      \r\n      // Cập nhật trạng thái đơn hàng trong localStorage\r\n      updateOrderStatusInLocalStorage(id, status);\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật trạng thái đơn hàng ${id}:`, error);\r\n      \r\n      // Cập nhật trạng thái đơn hàng trong localStorage\r\n      updateOrderStatusInLocalStorage(id, status);\r\n      \r\n      // Trả về response giả lập\r\n      return {\r\n        data: { id, status }\r\n      };\r\n    }\r\n  },\r\n  \r\n  getStats: async () => {\r\n    try {\r\n      return await apiClient.get('/orders/stats');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy thống kê đơn hàng:', error);\r\n      \r\n      // Tạo thống kê giả lập từ localStorage\r\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n      const totalSales = mockOrders.reduce((sum, order) => sum + (order.total_amount || 0), 0);\r\n      const totalOrders = mockOrders.length;\r\n      \r\n      return { \r\n        data: {\r\n          totalSales,\r\n          totalOrders,\r\n          pendingOrders: mockOrders.filter(o => o.status === 'pending').length,\r\n          processingOrders: mockOrders.filter(o => o.status === 'processing').length,\r\n          shippedOrders: mockOrders.filter(o => o.status === 'shipped').length,\r\n          deliveredOrders: mockOrders.filter(o => o.status === 'delivered').length,\r\n          cancelledOrders: mockOrders.filter(o => o.status === 'cancelled').length\r\n        } \r\n      };\r\n    }\r\n  },\r\n  \r\n  getCustomers: async () => {\r\n    try {\r\n      return await apiClient.get('/orders/customers');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách khách hàng:', error);\r\n      \r\n      // Tạo danh sách khách hàng giả lập từ localStorage\r\n      const mockOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n      const customersMap = {};\r\n      \r\n      mockOrders.forEach(order => {\r\n        if (order.customer_email) {\r\n          if (!customersMap[order.customer_email]) {\r\n            customersMap[order.customer_email] = {\r\n              id: Math.floor(1000 + Math.random() * 9000),\r\n              name: order.customer_name,\r\n              email: order.customer_email,\r\n              phone: order.customer_phone,\r\n              created_at: order.created_at,\r\n              order_count: 1,\r\n              total_spent: order.total_amount || 0\r\n            };\r\n          } else {\r\n            customersMap[order.customer_email].order_count += 1;\r\n            customersMap[order.customer_email].total_spent += (order.total_amount || 0);\r\n          }\r\n        }\r\n      });\r\n      \r\n      return { data: Object.values(customersMap) };\r\n    }\r\n  }\r\n};\r\n\r\n// Hàm trợ giúp để lưu đơn hàng vào localStorage\r\nconst saveOrderToLocalStorage = (order) => {\r\n  // Lấy danh sách đơn hàng hiện tại\r\n  const savedOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n  \r\n  // Thêm đơn hàng mới vào đầu danh sách\r\n  savedOrders.unshift({\r\n    ...order,\r\n    id: order.id || Math.floor(100000 + Math.random() * 900000),\r\n    status: order.status || 'pending',\r\n    created_at: order.created_at || new Date().toISOString()\r\n  });\r\n  \r\n  // Lưu lại vào localStorage\r\n  localStorage.setItem('mockOrders', JSON.stringify(savedOrders));\r\n  console.log('Saved order to localStorage:', order);\r\n};\r\n\r\n// Hàm trợ giúp để cập nhật trạng thái đơn hàng trong localStorage\r\nconst updateOrderStatusInLocalStorage = (orderId, status) => {\r\n  // Lấy danh sách đơn hàng hiện tại\r\n  const savedOrders = JSON.parse(localStorage.getItem('mockOrders') || '[]');\r\n  \r\n  // Cập nhật trạng thái của đơn hàng\r\n  const updatedOrders = savedOrders.map(order => {\r\n    if (order.id === parseInt(orderId)) {\r\n      return { ...order, status };\r\n    }\r\n    return order;\r\n  });\r\n  \r\n  // Lưu lại vào localStorage\r\n  localStorage.setItem('mockOrders', JSON.stringify(updatedOrders));\r\n  console.log(`Updated order ${orderId} status to ${status} in localStorage`);\r\n};\r\n\r\n// API Người dùng\r\nexport const userApi = {\r\n  register: async (userData) => {\r\n    try {\r\n      return await apiClient.post('/users/register', userData);\r\n    } catch (error) {\r\n      console.error('Lỗi khi đăng ký tài khoản:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  login: async (credentials) => {\r\n    console.log('Đang đăng nhập với:', credentials.email);\r\n    try {\r\n      // Kiểm tra thông tin đăng nhập\r\n      if (!credentials.email || !credentials.password) {\r\n        throw new Error('Vui lòng nhập đầy đủ email và mật khẩu');\r\n      }\r\n      \r\n      // Đặt timeout cho request để tránh chờ quá lâu\r\n      const response = await apiClient.post('/test-login', credentials, {\r\n        timeout: 10000\r\n      });\r\n      \r\n      console.log('Đăng nhập thành công:', response.data);\r\n      \r\n      // Lưu thông tin đăng nhập vào localStorage\r\n      if (response.data.token) {\r\n        localStorage.setItem('token', response.data.token);\r\n        \r\n        if (response.data.user) {\r\n          localStorage.setItem('userId', response.data.user.id);\r\n          localStorage.setItem('userRole', response.data.user.role);\r\n          localStorage.setItem('userName', response.data.user.name);\r\n          localStorage.setItem('userEmail', response.data.user.email);\r\n          localStorage.setItem('isAuthenticated', 'true');\r\n        }\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('Lỗi khi đăng nhập:', error);\r\n      \r\n      // Xử lý các loại lỗi cụ thể\r\n      if (error.response) {\r\n        // Server trả về response (lỗi HTTP)\r\n        console.error('Mã lỗi:', error.response.status);\r\n        console.error('Thông báo từ server:', error.response.data);\r\n        \r\n        // Xử lý các mã lỗi cụ thể\r\n        switch (error.response.status) {\r\n          case 401:\r\n            throw new Error(error.response.data.message || 'Email hoặc mật khẩu không đúng');\r\n          case 403:\r\n            throw new Error('Tài khoản của bạn không có quyền truy cập');\r\n          case 429:\r\n            throw new Error('Quá nhiều yêu cầu. Vui lòng thử lại sau');\r\n          case 500:\r\n            throw new Error('Lỗi máy chủ. Vui lòng thử lại sau');\r\n          default:\r\n            throw new Error(error.response.data.message || 'Đăng nhập thất bại');\r\n        }\r\n      } else if (error.request) {\r\n        // Request được gửi nhưng không nhận được response\r\n        console.error('Không nhận được phản hồi từ server');\r\n        throw new Error('Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại.');\r\n      } else if (error.code === 'ECONNABORTED') {\r\n        // Timeout\r\n        console.error('Request timeout');\r\n        throw new Error('Kết nối đến máy chủ quá chậm. Vui lòng thử lại sau.');\r\n      } else {\r\n        // Lỗi khác\r\n        console.error('Lỗi:', error.message);\r\n        throw error;\r\n      }\r\n    }\r\n  },\r\n\r\n  // Phương thức kiểm tra đăng nhập\r\n  checkAuth: () => {\r\n    const token = localStorage.getItem('token');\r\n    const isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';\r\n    const userRole = localStorage.getItem('userRole');\r\n    \r\n    return {\r\n      isAuthenticated,\r\n      userRole,\r\n      token\r\n    };\r\n  },\r\n\r\n  // Phương thức đăng xuất\r\n  logout: () => {\r\n    // Xóa tất cả thông tin xác thực khỏi localStorage\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userId');\r\n    localStorage.removeItem('userRole');\r\n    localStorage.removeItem('userName');\r\n    localStorage.removeItem('userEmail');\r\n    localStorage.removeItem('isAuthenticated');\r\n    \r\n    console.log('Đã đăng xuất thành công');\r\n    return true;\r\n  },\r\n\r\n  // Lấy thông tin người dùng hiện tại từ localStorage\r\n  getCurrentUser: () => {\r\n    return {\r\n      id: localStorage.getItem('userId'),\r\n      name: localStorage.getItem('userName'),\r\n      email: localStorage.getItem('userEmail'),\r\n      role: localStorage.getItem('userRole')\r\n    };\r\n  },\r\n  \r\n  getProfile: async (id) => {\r\n    try {\r\n      return await apiClient.get(`/users/${id}`);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi lấy thông tin người dùng:`, error);\r\n      return { data: null };\r\n    }\r\n  },\r\n  \r\n  updateProfile: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/users/${id}`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi cập nhật thông tin người dùng:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  changePassword: async (id, data) => {\r\n    try {\r\n      return await apiClient.put(`/users/${id}/password`, data);\r\n    } catch (error) {\r\n      console.error(`Lỗi khi đổi mật khẩu:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getAllUsers: async () => {\r\n    try {\r\n      return await apiClient.get('/users');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách người dùng:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  // Thêm phương thức yêu cầu đặt lại mật khẩu\r\n  requestPasswordReset: async (email) => {\r\n    try {\r\n      return await apiClient.post('/users/reset-password-request', { email });\r\n    } catch (error) {\r\n      console.error('Lỗi khi yêu cầu đặt lại mật khẩu:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  // Thêm phương thức đặt lại mật khẩu\r\n  resetPassword: async (token, newPassword) => {\r\n    try {\r\n      return await apiClient.post('/users/reset-password', { token, newPassword });\r\n    } catch (error) {\r\n      console.error('Lỗi khi đặt lại mật khẩu:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// API Giỏ hàng\r\nexport const cartApi = {\r\n  getCart: async () => {\r\n    try {\r\n      return await apiClient.get('/cart');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy giỏ hàng:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  addItem: async (data) => {\r\n    try {\r\n      return await apiClient.post('/cart/items', data);\r\n    } catch (error) {\r\n      console.error('Lỗi khi thêm sản phẩm vào giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  updateItem: async (productId, quantity) => {\r\n    try {\r\n      return await apiClient.put(`/cart/items/${productId}`, { quantity });\r\n    } catch (error) {\r\n      console.error('Lỗi khi cập nhật số lượng sản phẩm trong giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  removeItem: async (productId) => {\r\n    try {\r\n      return await apiClient.delete(`/cart/items/${productId}`);\r\n    } catch (error) {\r\n      console.error('Lỗi khi xóa sản phẩm khỏi giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  clearCart: async () => {\r\n    try {\r\n      return await apiClient.delete('/cart');\r\n    } catch (error) {\r\n      console.error('Lỗi khi xóa toàn bộ giỏ hàng:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  // Wishlist API\r\n  getWishlist: async () => {\r\n    try {\r\n      return await apiClient.get('/wishlist');\r\n    } catch (error) {\r\n      console.error('Lỗi khi lấy danh sách yêu thích:', error);\r\n      return { data: [] };\r\n    }\r\n  },\r\n  \r\n  addToWishlist: async (productId) => {\r\n    try {\r\n      return await apiClient.post('/wishlist/items', { productId });\r\n    } catch (error) {\r\n      console.error('Lỗi khi thêm sản phẩm vào danh sách yêu thích:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  removeFromWishlist: async (productId) => {\r\n    try {\r\n      return await apiClient.delete(`/wishlist/items/${productId}`);\r\n    } catch (error) {\r\n      console.error('Lỗi khi xóa sản phẩm khỏi danh sách yêu thích:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// Tạo một object các API riêng biệt nhưng không export default\r\nconst apiServices = {\r\n  product: productApi,\r\n  review: reviewApi,\r\n  category: categoryApi,\r\n  order: orderApi,\r\n  user: userApi,\r\n  cart: cartApi\r\n};\r\n\r\n// Export apiServices, nhưng khuyến khích sử dụng các API riêng lẻ để tránh circular dependency\r\nexport { apiServices };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}