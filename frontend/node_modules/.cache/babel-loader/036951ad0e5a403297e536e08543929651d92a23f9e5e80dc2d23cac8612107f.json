{"ast":null,"code":"// src/utils/ServerStatus.js\nimport axios from 'axios';\nexport const checkServerStatus = async () => {\n  try {\n    // Thử các endpoint khác nhau\n    const endpoints = ['/api/health-check', '/api/products', '/api/categories', '/api/users'];\n    let serverRunning = false;\n    let successEndpoint = '';\n\n    // Thử từng endpoint cho đến khi tìm thấy một endpoint hoạt động\n    for (const endpoint of endpoints) {\n      try {\n        console.log(`Checking endpoint: ${endpoint}`);\n        const response = await axios.get(`http://localhost:5000${endpoint}`, {\n          timeout: 3000\n        });\n        if (response.status >= 200 && response.status < 300) {\n          serverRunning = true;\n          successEndpoint = endpoint;\n          break;\n        }\n      } catch (endpointError) {\n        console.log(`Endpoint ${endpoint} error:`, endpointError.message);\n        // Tiếp tục với endpoint tiếp theo\n      }\n    }\n    if (serverRunning) {\n      console.log(`Server is running, successful endpoint: ${successEndpoint}`);\n      return {\n        isRunning: true,\n        message: `Server đang hoạt động (endpoint: ${successEndpoint})`\n      };\n    }\n\n    // Nếu không endpoint nào hoạt động, thử kiểm tra root URL\n    const rootResponse = await axios.get('http://localhost:5000', {\n      timeout: 3000\n    });\n    return {\n      isRunning: true,\n      message: 'Server đang chạy nhưng không tìm thấy API endpoints'\n    };\n  } catch (error) {\n    console.error('Server check error:', error);\n\n    // Kiểm tra chi tiết lỗi\n    if (error.code === 'ECONNREFUSED') {\n      return {\n        isRunning: false,\n        message: 'Không thể kết nối đến server. Server có thể chưa được khởi động.'\n      };\n    }\n    if (error.code === 'ETIMEDOUT') {\n      return {\n        isRunning: false,\n        message: 'Kết nối đến server bị timeout.'\n      };\n    }\n    return {\n      isRunning: false,\n      message: `Lỗi khi kiểm tra server: ${error.message}`\n    };\n  }\n};","map":{"version":3,"names":["axios","checkServerStatus","endpoints","serverRunning","successEndpoint","endpoint","console","log","response","get","timeout","status","endpointError","message","isRunning","rootResponse","error","code"],"sources":["D:/UDW/BaiLam/frontend/src/utils/ServerStatus.js"],"sourcesContent":["// src/utils/ServerStatus.js\r\nimport axios from 'axios';\r\n\r\nexport const checkServerStatus = async () => {\r\n  try {\r\n    // Thử các endpoint khác nhau\r\n    const endpoints = [\r\n      '/api/health-check',\r\n      '/api/products',\r\n      '/api/categories',\r\n      '/api/users'\r\n    ];\r\n    \r\n    let serverRunning = false;\r\n    let successEndpoint = '';\r\n    \r\n    // Thử từng endpoint cho đến khi tìm thấy một endpoint hoạt động\r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        console.log(`Checking endpoint: ${endpoint}`);\r\n        const response = await axios.get(`http://localhost:5000${endpoint}`, {\r\n          timeout: 3000\r\n        });\r\n        \r\n        if (response.status >= 200 && response.status < 300) {\r\n          serverRunning = true;\r\n          successEndpoint = endpoint;\r\n          break;\r\n        }\r\n      } catch (endpointError) {\r\n        console.log(`Endpoint ${endpoint} error:`, endpointError.message);\r\n        // Tiếp tục với endpoint tiếp theo\r\n      }\r\n    }\r\n    \r\n    if (serverRunning) {\r\n      console.log(`Server is running, successful endpoint: ${successEndpoint}`);\r\n      return {\r\n        isRunning: true,\r\n        message: `Server đang hoạt động (endpoint: ${successEndpoint})`\r\n      };\r\n    }\r\n    \r\n    // Nếu không endpoint nào hoạt động, thử kiểm tra root URL\r\n    const rootResponse = await axios.get('http://localhost:5000', {\r\n      timeout: 3000\r\n    });\r\n    \r\n    return {\r\n      isRunning: true,\r\n      message: 'Server đang chạy nhưng không tìm thấy API endpoints'\r\n    };\r\n  } catch (error) {\r\n    console.error('Server check error:', error);\r\n    \r\n    // Kiểm tra chi tiết lỗi\r\n    if (error.code === 'ECONNREFUSED') {\r\n      return {\r\n        isRunning: false,\r\n        message: 'Không thể kết nối đến server. Server có thể chưa được khởi động.'\r\n      };\r\n    }\r\n    \r\n    if (error.code === 'ETIMEDOUT') {\r\n      return {\r\n        isRunning: false,\r\n        message: 'Kết nối đến server bị timeout.'\r\n      };\r\n    }\r\n    \r\n    return {\r\n      isRunning: false,\r\n      message: `Lỗi khi kiểm tra server: ${error.message}`\r\n    };\r\n  }\r\n};"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;EAC3C,IAAI;IACF;IACA,MAAMC,SAAS,GAAG,CAChB,mBAAmB,EACnB,eAAe,EACf,iBAAiB,EACjB,YAAY,CACb;IAED,IAAIC,aAAa,GAAG,KAAK;IACzB,IAAIC,eAAe,GAAG,EAAE;;IAExB;IACA,KAAK,MAAMC,QAAQ,IAAIH,SAAS,EAAE;MAChC,IAAI;QACFI,OAAO,CAACC,GAAG,CAAC,sBAAsBF,QAAQ,EAAE,CAAC;QAC7C,MAAMG,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,wBAAwBJ,QAAQ,EAAE,EAAE;UACnEK,OAAO,EAAE;QACX,CAAC,CAAC;QAEF,IAAIF,QAAQ,CAACG,MAAM,IAAI,GAAG,IAAIH,QAAQ,CAACG,MAAM,GAAG,GAAG,EAAE;UACnDR,aAAa,GAAG,IAAI;UACpBC,eAAe,GAAGC,QAAQ;UAC1B;QACF;MACF,CAAC,CAAC,OAAOO,aAAa,EAAE;QACtBN,OAAO,CAACC,GAAG,CAAC,YAAYF,QAAQ,SAAS,EAAEO,aAAa,CAACC,OAAO,CAAC;QACjE;MACF;IACF;IAEA,IAAIV,aAAa,EAAE;MACjBG,OAAO,CAACC,GAAG,CAAC,2CAA2CH,eAAe,EAAE,CAAC;MACzE,OAAO;QACLU,SAAS,EAAE,IAAI;QACfD,OAAO,EAAE,oCAAoCT,eAAe;MAC9D,CAAC;IACH;;IAEA;IACA,MAAMW,YAAY,GAAG,MAAMf,KAAK,CAACS,GAAG,CAAC,uBAAuB,EAAE;MAC5DC,OAAO,EAAE;IACX,CAAC,CAAC;IAEF,OAAO;MACLI,SAAS,EAAE,IAAI;MACfD,OAAO,EAAE;IACX,CAAC;EACH,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;;IAE3C;IACA,IAAIA,KAAK,CAACC,IAAI,KAAK,cAAc,EAAE;MACjC,OAAO;QACLH,SAAS,EAAE,KAAK;QAChBD,OAAO,EAAE;MACX,CAAC;IACH;IAEA,IAAIG,KAAK,CAACC,IAAI,KAAK,WAAW,EAAE;MAC9B,OAAO;QACLH,SAAS,EAAE,KAAK;QAChBD,OAAO,EAAE;MACX,CAAC;IACH;IAEA,OAAO;MACLC,SAAS,EAAE,KAAK;MAChBD,OAAO,EAAE,4BAA4BG,KAAK,CAACH,OAAO;IACpD,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}