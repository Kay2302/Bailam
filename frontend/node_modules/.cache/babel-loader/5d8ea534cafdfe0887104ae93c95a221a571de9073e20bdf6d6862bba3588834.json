{"ast":null,"code":"var _jsxFileName = \"D:\\\\UDW\\\\BaiLam\\\\frontend\\\\src\\\\contexts\\\\ProductContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/contexts/ProductContext.js\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { cartApi, wishlistApi } from '../services/api';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductContext = /*#__PURE__*/createContext();\nexport const useProduct = () => {\n  _s();\n  return useContext(ProductContext);\n};\n_s(useProduct, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ProductProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState([]);\n  const [wishlist, setWishlist] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const {\n    currentUser,\n    isAuthenticated\n  } = useAuth();\n  useEffect(() => {\n    const loadFromStorage = async () => {\n      try {\n        setLoading(true);\n        if (isAuthenticated && currentUser) {\n          // Người dùng đã đăng nhập - lấy dữ liệu từ API\n          try {\n            const cartResponse = await cartApi.getCart(currentUser.id);\n            setCart(cartResponse.data);\n            const wishlistResponse = await wishlistApi.getWishlist(currentUser.id);\n            setWishlist(wishlistResponse.data);\n          } catch (apiErr) {\n            console.error('Error loading data from API:', apiErr);\n            // Fallback to localStorage if API fails\n            const storedCart = localStorage.getItem('cart');\n            const storedWishlist = localStorage.getItem('wishlist');\n            if (storedCart) setCart(JSON.parse(storedCart));\n            if (storedWishlist) setWishlist(JSON.parse(storedWishlist));\n          }\n        } else {\n          // Người dùng chưa đăng nhập - lấy dữ liệu từ localStorage\n          const storedCart = localStorage.getItem('cart');\n          const storedWishlist = localStorage.getItem('wishlist');\n          if (storedCart) setCart(JSON.parse(storedCart));\n          if (storedWishlist) setWishlist(JSON.parse(storedWishlist));\n        }\n      } catch (err) {\n        console.error('Error loading data from storage:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadFromStorage();\n  }, [isAuthenticated, currentUser]);\n\n  // Update localStorage only when not authenticated\n  useEffect(() => {\n    if (!isAuthenticated) {\n      localStorage.setItem('cart', JSON.stringify(cart));\n    }\n  }, [cart, isAuthenticated]);\n  useEffect(() => {\n    if (!isAuthenticated) {\n      localStorage.setItem('wishlist', JSON.stringify(wishlist));\n    }\n  }, [wishlist, isAuthenticated]);\n\n  // Add to cart\n  const addToCart = async (product, quantity = 1) => {\n    if (isAuthenticated && currentUser) {\n      try {\n        // Add to cart via API\n        await cartApi.addToCart(currentUser.id, product.id, quantity);\n\n        // Update local state\n        const cartResponse = await cartApi.getCart(currentUser.id);\n        setCart(cartResponse.data);\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        // Fallback to local state update if API fails\n        setCart(prevCart => {\n          const existingItemIndex = prevCart.findIndex(item => item.id === product.id);\n          if (existingItemIndex >= 0) {\n            // Item already exists, update quantity\n            const updatedCart = [...prevCart];\n            updatedCart[existingItemIndex] = {\n              ...updatedCart[existingItemIndex],\n              quantity: updatedCart[existingItemIndex].quantity + quantity\n            };\n            return updatedCart;\n          } else {\n            // Add new item\n            return [...prevCart, {\n              ...product,\n              quantity\n            }];\n          }\n        });\n      }\n    } else {\n      // Just update local state for non-authenticated users\n      setCart(prevCart => {\n        const existingItemIndex = prevCart.findIndex(item => item.id === product.id);\n        if (existingItemIndex >= 0) {\n          // Item already exists, update quantity\n          const updatedCart = [...prevCart];\n          updatedCart[existingItemIndex] = {\n            ...updatedCart[existingItemIndex],\n            quantity: updatedCart[existingItemIndex].quantity + quantity\n          };\n          return updatedCart;\n        } else {\n          // Add new item\n          return [...prevCart, {\n            ...product,\n            quantity\n          }];\n        }\n      });\n    }\n  };\n\n  // Update cart item quantity\n  const updateCartItem = async (id, quantity) => {\n    if (isAuthenticated && currentUser) {\n      try {\n        // Update via API\n        await cartApi.updateCartItem(currentUser.id, id, quantity);\n\n        // Update local state\n        setCart(prevCart => prevCart.map(item => item.id === id ? {\n          ...item,\n          quantity\n        } : item));\n      } catch (error) {\n        console.error('Error updating cart item:', error);\n        // Fallback to local state update\n        setCart(prevCart => prevCart.map(item => item.id === id ? {\n          ...item,\n          quantity\n        } : item));\n      }\n    } else {\n      // Just update local state for non-authenticated users\n      setCart(prevCart => prevCart.map(item => item.id === id ? {\n        ...item,\n        quantity\n      } : item));\n    }\n  };\n\n  // Remove from cart\n  const removeFromCart = async id => {\n    if (isAuthenticated && currentUser) {\n      try {\n        // Remove via API\n        await cartApi.removeFromCart(currentUser.id, id);\n\n        // Update local state\n        setCart(prevCart => prevCart.filter(item => item.id !== id));\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        // Fallback to local state update\n        setCart(prevCart => prevCart.filter(item => item.id !== id));\n      }\n    } else {\n      // Just update local state for non-authenticated users\n      setCart(prevCart => prevCart.filter(item => item.id !== id));\n    }\n  };\n\n  // Clear cart\n  const clearCart = async () => {\n    if (isAuthenticated && currentUser) {\n      try {\n        // Clear via API\n        await cartApi.clearCart(currentUser.id);\n\n        // Update local state\n        setCart([]);\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n        // Fallback to local state update\n        setCart([]);\n      }\n    } else {\n      // Just update local state for non-authenticated users\n      setCart([]);\n    }\n  };\n\n  // Get cart total\n  const getCartTotal = () => {\n    return cart.reduce((total, item) => {\n      const price = item.discountPrice || item.price;\n      return total + price * item.quantity;\n    }, 0);\n  };\n\n  // Add to wishlist\n  const addToWishlist = async product => {\n    if (isAuthenticated && currentUser) {\n      try {\n        // Add to wishlist via API\n        await wishlistApi.addToWishlist(currentUser.id, product.id);\n\n        // Update local state\n        const wishlistResponse = await wishlistApi.getWishlist(currentUser.id);\n        setWishlist(wishlistResponse.data);\n      } catch (error) {\n        console.error('Error adding to wishlist:', error);\n        // Fallback to local state update\n        setWishlist(prevWishlist => {\n          const exists = prevWishlist.some(item => item.id === product.id);\n          if (exists) {\n            return prevWishlist;\n          } else {\n            return [...prevWishlist, product];\n          }\n        });\n      }\n    } else {\n      // Just update local state for non-authenticated users\n      setWishlist(prevWishlist => {\n        const exists = prevWishlist.some(item => item.id === product.id);\n        if (exists) {\n          return prevWishlist;\n        } else {\n          return [...prevWishlist, product];\n        }\n      });\n    }\n  };\n\n  // Remove from wishlist\n  const removeFromWishlist = async id => {\n    if (isAuthenticated && currentUser) {\n      try {\n        // Remove via API\n        await wishlistApi.removeFromWishlist(currentUser.id, id);\n\n        // Update local state\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\n      } catch (error) {\n        console.error('Error removing from wishlist:', error);\n        // Fallback to local state update\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\n      }\n    } else {\n      // Just update local state for non-authenticated users\n      setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\n    }\n  };\n\n  // Migrate cart from localStorage to database when user logs in\n  const migrateCartToDb = async userId => {\n    try {\n      const storedCart = localStorage.getItem('cart');\n      const storedWishlist = localStorage.getItem('wishlist');\n      if (storedCart) {\n        const cartItems = JSON.parse(storedCart);\n\n        // Add each item to the database\n        for (const item of cartItems) {\n          await cartApi.addToCart(userId, item.id, item.quantity);\n        }\n\n        // Clear localStorage after migration\n        localStorage.removeItem('cart');\n      }\n      if (storedWishlist) {\n        const wishlistItems = JSON.parse(storedWishlist);\n\n        // Add each item to the database\n        for (const item of wishlistItems) {\n          await wishlistApi.addToWishlist(userId, item.id);\n        }\n\n        // Clear localStorage after migration\n        localStorage.removeItem('wishlist');\n      }\n\n      // Reload cart and wishlist from database\n      const cartResponse = await cartApi.getCart(userId);\n      setCart(cartResponse.data);\n      const wishlistResponse = await wishlistApi.getWishlist(userId);\n      setWishlist(wishlistResponse.data);\n    } catch (error) {\n      console.error('Error migrating cart to database:', error);\n    }\n  };\n  const value = {\n    cart,\n    wishlist,\n    loading,\n    addToCart,\n    updateCartItem,\n    removeFromCart,\n    clearCart,\n    getCartTotal,\n    addToWishlist,\n    removeFromWishlist,\n    migrateCartToDb\n  };\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 10\n  }, this);\n};\n_s2(ProductProvider, \"DO4MOIqHdUqM31xbPyq6l5HqcW4=\", false, function () {\n  return [useAuth];\n});\n_c = ProductProvider;\nvar _c;\n$RefreshReg$(_c, \"ProductProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","cartApi","wishlistApi","useAuth","jsxDEV","_jsxDEV","ProductContext","useProduct","_s","ProductProvider","children","_s2","cart","setCart","wishlist","setWishlist","loading","setLoading","currentUser","isAuthenticated","loadFromStorage","cartResponse","getCart","id","data","wishlistResponse","getWishlist","apiErr","console","error","storedCart","localStorage","getItem","storedWishlist","JSON","parse","err","setItem","stringify","addToCart","product","quantity","prevCart","existingItemIndex","findIndex","item","updatedCart","updateCartItem","map","removeFromCart","filter","clearCart","getCartTotal","reduce","total","price","discountPrice","addToWishlist","prevWishlist","exists","some","removeFromWishlist","migrateCartToDb","userId","cartItems","removeItem","wishlistItems","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/UDW/BaiLam/frontend/src/contexts/ProductContext.js"],"sourcesContent":["// src/contexts/ProductContext.js\r\nimport React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { cartApi, wishlistApi } from '../services/api';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst ProductContext = createContext();\r\n\r\nexport const useProduct = () => useContext(ProductContext);\r\n\r\nexport const ProductProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { currentUser, isAuthenticated } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const loadFromStorage = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        if (isAuthenticated && currentUser) {\r\n          // Người dùng đã đăng nhập - lấy dữ liệu từ API\r\n          try {\r\n            const cartResponse = await cartApi.getCart(currentUser.id);\r\n            setCart(cartResponse.data);\r\n            \r\n            const wishlistResponse = await wishlistApi.getWishlist(currentUser.id);\r\n            setWishlist(wishlistResponse.data);\r\n          } catch (apiErr) {\r\n            console.error('Error loading data from API:', apiErr);\r\n            // Fallback to localStorage if API fails\r\n            const storedCart = localStorage.getItem('cart');\r\n            const storedWishlist = localStorage.getItem('wishlist');\r\n            \r\n            if (storedCart) setCart(JSON.parse(storedCart));\r\n            if (storedWishlist) setWishlist(JSON.parse(storedWishlist));\r\n          }\r\n        } else {\r\n          // Người dùng chưa đăng nhập - lấy dữ liệu từ localStorage\r\n          const storedCart = localStorage.getItem('cart');\r\n          const storedWishlist = localStorage.getItem('wishlist');\r\n\r\n          if (storedCart) setCart(JSON.parse(storedCart));\r\n          if (storedWishlist) setWishlist(JSON.parse(storedWishlist));\r\n        }\r\n      } catch (err) {\r\n        console.error('Error loading data from storage:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadFromStorage();\r\n  }, [isAuthenticated, currentUser]);\r\n\r\n  // Update localStorage only when not authenticated\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n  }, [cart, isAuthenticated]);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      localStorage.setItem('wishlist', JSON.stringify(wishlist));\r\n    }\r\n  }, [wishlist, isAuthenticated]);\r\n\r\n  // Add to cart\r\n  const addToCart = async (product, quantity = 1) => {\r\n    if (isAuthenticated && currentUser) {\r\n      try {\r\n        // Add to cart via API\r\n        await cartApi.addToCart(currentUser.id, product.id, quantity);\r\n        \r\n        // Update local state\r\n        const cartResponse = await cartApi.getCart(currentUser.id);\r\n        setCart(cartResponse.data);\r\n      } catch (error) {\r\n        console.error('Error adding to cart:', error);\r\n        // Fallback to local state update if API fails\r\n        setCart(prevCart => {\r\n          const existingItemIndex = prevCart.findIndex(item => item.id === product.id);\r\n          \r\n          if (existingItemIndex >= 0) {\r\n            // Item already exists, update quantity\r\n            const updatedCart = [...prevCart];\r\n            updatedCart[existingItemIndex] = {\r\n              ...updatedCart[existingItemIndex],\r\n              quantity: updatedCart[existingItemIndex].quantity + quantity\r\n            };\r\n            return updatedCart;\r\n          } else {\r\n            // Add new item\r\n            return [...prevCart, { ...product, quantity }];\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      // Just update local state for non-authenticated users\r\n      setCart(prevCart => {\r\n        const existingItemIndex = prevCart.findIndex(item => item.id === product.id);\r\n        \r\n        if (existingItemIndex >= 0) {\r\n          // Item already exists, update quantity\r\n          const updatedCart = [...prevCart];\r\n          updatedCart[existingItemIndex] = {\r\n            ...updatedCart[existingItemIndex],\r\n            quantity: updatedCart[existingItemIndex].quantity + quantity\r\n          };\r\n          return updatedCart;\r\n        } else {\r\n          // Add new item\r\n          return [...prevCart, { ...product, quantity }];\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  // Update cart item quantity\r\n  const updateCartItem = async (id, quantity) => {\r\n    if (isAuthenticated && currentUser) {\r\n      try {\r\n        // Update via API\r\n        await cartApi.updateCartItem(currentUser.id, id, quantity);\r\n        \r\n        // Update local state\r\n        setCart(prevCart => \r\n          prevCart.map(item => \r\n            item.id === id ? { ...item, quantity } : item\r\n          )\r\n        );\r\n      } catch (error) {\r\n        console.error('Error updating cart item:', error);\r\n        // Fallback to local state update\r\n        setCart(prevCart => \r\n          prevCart.map(item => \r\n            item.id === id ? { ...item, quantity } : item\r\n          )\r\n        );\r\n      }\r\n    } else {\r\n      // Just update local state for non-authenticated users\r\n      setCart(prevCart => \r\n        prevCart.map(item => \r\n          item.id === id ? { ...item, quantity } : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  // Remove from cart\r\n  const removeFromCart = async (id) => {\r\n    if (isAuthenticated && currentUser) {\r\n      try {\r\n        // Remove via API\r\n        await cartApi.removeFromCart(currentUser.id, id);\r\n        \r\n        // Update local state\r\n        setCart(prevCart => prevCart.filter(item => item.id !== id));\r\n      } catch (error) {\r\n        console.error('Error removing from cart:', error);\r\n        // Fallback to local state update\r\n        setCart(prevCart => prevCart.filter(item => item.id !== id));\r\n      }\r\n    } else {\r\n      // Just update local state for non-authenticated users\r\n      setCart(prevCart => prevCart.filter(item => item.id !== id));\r\n    }\r\n  };\r\n\r\n  // Clear cart\r\n  const clearCart = async () => {\r\n    if (isAuthenticated && currentUser) {\r\n      try {\r\n        // Clear via API\r\n        await cartApi.clearCart(currentUser.id);\r\n        \r\n        // Update local state\r\n        setCart([]);\r\n      } catch (error) {\r\n        console.error('Error clearing cart:', error);\r\n        // Fallback to local state update\r\n        setCart([]);\r\n      }\r\n    } else {\r\n      // Just update local state for non-authenticated users\r\n      setCart([]);\r\n    }\r\n  };\r\n\r\n  // Get cart total\r\n  const getCartTotal = () => {\r\n    return cart.reduce((total, item) => {\r\n      const price = item.discountPrice || item.price;\r\n      return total + (price * item.quantity);\r\n    }, 0);\r\n  };\r\n\r\n  // Add to wishlist\r\n  const addToWishlist = async (product) => {\r\n    if (isAuthenticated && currentUser) {\r\n      try {\r\n        // Add to wishlist via API\r\n        await wishlistApi.addToWishlist(currentUser.id, product.id);\r\n        \r\n        // Update local state\r\n        const wishlistResponse = await wishlistApi.getWishlist(currentUser.id);\r\n        setWishlist(wishlistResponse.data);\r\n      } catch (error) {\r\n        console.error('Error adding to wishlist:', error);\r\n        // Fallback to local state update\r\n        setWishlist(prevWishlist => {\r\n          const exists = prevWishlist.some(item => item.id === product.id);\r\n          \r\n          if (exists) {\r\n            return prevWishlist;\r\n          } else {\r\n            return [...prevWishlist, product];\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      // Just update local state for non-authenticated users\r\n      setWishlist(prevWishlist => {\r\n        const exists = prevWishlist.some(item => item.id === product.id);\r\n        \r\n        if (exists) {\r\n          return prevWishlist;\r\n        } else {\r\n          return [...prevWishlist, product];\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  // Remove from wishlist\r\n  const removeFromWishlist = async (id) => {\r\n    if (isAuthenticated && currentUser) {\r\n      try {\r\n        // Remove via API\r\n        await wishlistApi.removeFromWishlist(currentUser.id, id);\r\n        \r\n        // Update local state\r\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\r\n      } catch (error) {\r\n        console.error('Error removing from wishlist:', error);\r\n        // Fallback to local state update\r\n        setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\r\n      }\r\n    } else {\r\n      // Just update local state for non-authenticated users\r\n      setWishlist(prevWishlist => prevWishlist.filter(item => item.id !== id));\r\n    }\r\n  };\r\n\r\n  // Migrate cart from localStorage to database when user logs in\r\n  const migrateCartToDb = async (userId) => {\r\n    try {\r\n      const storedCart = localStorage.getItem('cart');\r\n      const storedWishlist = localStorage.getItem('wishlist');\r\n      \r\n      if (storedCart) {\r\n        const cartItems = JSON.parse(storedCart);\r\n        \r\n        // Add each item to the database\r\n        for (const item of cartItems) {\r\n          await cartApi.addToCart(userId, item.id, item.quantity);\r\n        }\r\n        \r\n        // Clear localStorage after migration\r\n        localStorage.removeItem('cart');\r\n      }\r\n      \r\n      if (storedWishlist) {\r\n        const wishlistItems = JSON.parse(storedWishlist);\r\n        \r\n        // Add each item to the database\r\n        for (const item of wishlistItems) {\r\n          await wishlistApi.addToWishlist(userId, item.id);\r\n        }\r\n        \r\n        // Clear localStorage after migration\r\n        localStorage.removeItem('wishlist');\r\n      }\r\n      \r\n      // Reload cart and wishlist from database\r\n      const cartResponse = await cartApi.getCart(userId);\r\n      setCart(cartResponse.data);\r\n      \r\n      const wishlistResponse = await wishlistApi.getWishlist(userId);\r\n      setWishlist(wishlistResponse.data);\r\n    } catch (error) {\r\n      console.error('Error migrating cart to database:', error);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    cart,\r\n    wishlist,\r\n    loading,\r\n    addToCart,\r\n    updateCartItem,\r\n    removeFromCart,\r\n    clearCart,\r\n    getCartTotal,\r\n    addToWishlist,\r\n    removeFromWishlist,\r\n    migrateCartToDb\r\n  };\r\n\r\n  return <ProductContext.Provider value={value}>{children}</ProductContext.Provider>;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}